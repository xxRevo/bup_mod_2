### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
### search_filters = {FOCUS_FILTER_PROPAGANDA}
### search_filters = {FOCUS_FILTER_ARMY_XP}
### search_filters = {FOCUS_FILTER_NAVY_XP}
### search_filters = {FOCUS_FILTER_AIR_XP}
### search_filters = {FOCUS_FILTER_ITA_MISSIOLINI}
### search_filters = {FOCUS_FILTER_BALANCE_OF_POWER}
# Reminder that focus filters prio has to be handled in the generic focus file :)



focus_tree = {
	id = italian_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			OR = {
				tag = ITA
				tag = RSI
				tag = RDS
			}
		}
	}
	
	default = no

	continuous_focus_position = { x = 1500 y = 1500 }

	initial_show_position = {
		x = 0
		y = 0
	}


########  ##    ##    ########  ##        #######   #######  ########        ###    ##        #######  ##    ## ######## 
##     ##  ##  ##     ##     ## ##       ##     ## ##     ## ##     ##      ## ##   ##       ##     ## ###   ## ##       
##     ##   ####      ##     ## ##       ##     ## ##     ## ##     ##     ##   ##  ##       ##     ## ####  ## ##       
########     ##       ########  ##       ##     ## ##     ## ##     ##    ##     ## ##       ##     ## ## ## ## ######   
##     ##    ##       ##     ## ##       ##     ## ##     ## ##     ##    ######### ##       ##     ## ##  #### ##       
##     ##    ##       ##     ## ##       ##     ## ##     ## ##     ##    ##     ## ##       ##     ## ##   ### ##       
########     ##       ########  ########  #######   #######  ########     ##     ## ########  #######  ##    ## ######## 



 ######   #######  ##        #######  ##    ## ####    ###    ##                ##    #### ##    ## ########  ##     ##  ######  ######## ########  ####    ###    ##       
##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##               ##      ##  ###   ## ##     ## ##     ## ##    ##    ##    ##     ##  ##    ## ##   ##       
##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##              ##       ##  ####  ## ##     ## ##     ## ##          ##    ##     ##  ##   ##   ##  ##       
##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##             ##        ##  ## ## ## ##     ## ##     ##  ######     ##    ########   ##  ##     ## ##       
##       ##     ## ##       ##     ## ##  ####  ##  ######### ##            ##         ##  ##  #### ##     ## ##     ##       ##    ##    ##   ##    ##  ######### ##       
##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##           ##          ##  ##   ### ##     ## ##     ## ##    ##    ##    ##    ##   ##  ##     ## ##       
 ######   #######  ########  #######  ##    ## #### ##     ## ########    ##          #### ##    ## ########   #######   ######     ##    ##     ## #### ##     ## ######## 


	focus = {
		id = ITA_ethiopian_war_logistics_bba
		icon = GFX_goal_generic_position_armies

		x = 2
		y = 0
		offset = {
			x = 0
			y = 0
			trigger = {
				ITA_cw_branches_are_visible = yes
			}
		}
		cost = 5

		bypass = {
			OR = {
				NOT = { has_global_flag = second_italo_ethiopian_war_flag }
				AND = {
					550 = { NOT = { is_owned_and_controlled_by = ITA } }
					559 = { NOT = { is_owned_and_controlled_by = ITA } }
					844 = { NOT = { is_owned_and_controlled_by = ITA } }
				}
			}
		}

		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = { limit = { 550 = { is_owned_and_controlled_by = ITA } }
				550 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				550 = {
					add_building_construction = {
						type = naval_base
						level = 2
						province = 12766
						instant_build = yes
					}
				}
			}

			if = { limit = { 559 = { is_owned_and_controlled_by = ITA } }
				559 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
				}
				559 = {
					add_building_construction = {
						type = naval_base
						level = 2
						province = 12991
						instant_build = yes
					}
				}
			}

			if = { limit = { 844 = { is_owned_and_controlled_by = ITA } }
				844 = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
				}
				844 = {
					add_building_construction = {
						type = naval_base
						level = 2
						province = 12941
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = ITA_italian_highways_bba
		icon = GFX_focus_generic_truck
		x = 6
		y = 0
		relative_position_id = ITA_ethiopian_war_logistics_bba
		cost = 2
		available = {
			OR = {
				controls_state = 2
				controls_state = 117
				controls_state = 162
				controls_state = 158
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			2 = { #ROME
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			117 = { #CAMPANIA
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			162 = { #TUSCANY
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			158 = { #PIEDMONT
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}

			every_owned_state = {
				limit = {
					is_core_of = ROOT
					is_fully_controlled_by = ROOT
				}
				add_dynamic_modifier = {
					modifier = ITA_italian_highways_modifier
					scope = ITA
					days = 365
				}
			}		
		}
	}

	focus = {
		id = ITA_ministry_of_italian_africa
		icon = GFX_focus_ITA_ministry_of_italian_africa
		prerequisite = { focus = ITA_italian_highways_bba }
		prerequisite = { focus = ITA_ethiopian_war_logistics_bba }

		x = -6
		y = 1
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 75
			custom_effect_tooltip = ITA_ministry_of_italian_africa_occupation_law_tt
			show_ideas_tooltip = ITA_fake_colonial_police_law

			unlock_decision_category_tooltip = ITA_colonial_management_dec_cat

			hidden_effect = {
				country_event = BBA_italy_colonial_management.1
			}
		}
	}

	focus = {
		id = ITA_develop_libya
		icon = GFX_focus_generic_develop_libya
		prerequisite = { focus = ITA_ministry_of_italian_africa }

		x = 0
		y = 1
		relative_position_id = ITA_ministry_of_italian_africa
		cost = 10
		available = {

		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					NOT = {
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = ROOT
						}
						any_subject_country = { #FOR PUPPETS
							any_controlled_state = {
								is_core_of = LBA
								is_fully_controlled_by = PREV
							}
						}
					}
				}
				custom_effect_tooltip = ITA_develop_libya_tt
			}

			448 = { #TRIPOLI
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}
			449 = { #TRIPOLI
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}
			
			450 = { #BENGHALI
				add_building_construction = {
					type = air_base
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}
			
	
			451 = { #DERNA
				add_building_construction = {
					type = air_base
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}

			661 = { #TRIPOLI
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}

			662 = { #TRIPOLI
				add_building_construction = {
					type = air_base
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}

			663 = { #TRIPOLI
				add_building_construction = {
					type = air_base
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = ITA_improved_infrastructure_in_state_flag
			}
		}
	}


	focus = {
		id = ITA_railway_africa
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = ITA_develop_libya }

		x = -1
		y = 1
		relative_position_id = ITA_develop_libya 
		cost = 2
		available = {

		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {

			#Roma - Bologna
			build_railway = {
				path = { 1149 4194 7209 9980 1118 1041 4047 10046 10117 12088 4057 1198 1127 4120 11954 }
			}
			build_railway = {
				path = { 1149 4194 7209 9980 1118 1041 4047 10046 10117 12088 4057 1198 1127 4120 11954 }
			}

			#Roma - Napoli
			build_railway = {
				path = { 11954 10123 12094 4151 1204 7082 9992 1130 }
			}
			build_railway = {
				path = { 11954 10123 12094 4151 1204 7082 9992 1130 }
			}
		}
	}

	focus = {
		id = ITA_railway_africa_2
		text = "Connect Tunusia To Libya"
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = ITA_railway_africa }

		x = 0
		y = 1
		relative_position_id = ITA_railway_africa
		cost = 2
		available = {
			controls_state = 665
			controls_state = 458
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			#Roma - La Spezia
			build_railway = {
				path = { 1149 1189 12039 11957 7005 10026 11921 }
			}
			build_railway = {
				path = { 1149 1189 12039 11957 7005 10026 11921 }
			}

		}
	}

	focus = {
		id = ITA_litoranea_balbo
		icon = GFX_focus_generic_improve_roads
		prerequisite = { focus = ITA_develop_libya }

		x = -3
		y = 1
		relative_position_id = ITA_develop_libya
		cost = 5
		available = {
				448 = {
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}	
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_building_construction = {
						type = naval_base
						level = 4
						instant_build = yes
						province = 1149 			
					}
					add_building_construction = {
						type = naval_base
						level = 4
						instant_build = yes
						province = 11954		
					}
		}
	}

	focus = {
		id = ITA_via_della_vittoria
		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = ITA_litoranea_balbo }

		x = 0
		y = 1
		relative_position_id = ITA_litoranea_balbo
		cost = 10
		available = {
			451 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			452 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			451 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				if = {
					limit = {
						has_resistance = yes
					}
					add_compliance = 5
				}
			}
			452 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				if = {
					limit = {
						has_resistance = yes
					}
					add_compliance = 5
				}
			}

			# EXTRA STATES 

			custom_effect_tooltip = ITA_via_della_vittoria_extra_states_tt

			#LIBYA
			if = {
				limit = {
					450 = { #BENGHASI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				450 = { #BENGHASI
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					449 = { #EL AGHELIA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				449 = { #EL AGHELIA
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					448 = { #TRIPOLI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				448 = { #TRIPOLI
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}

			#TUNISIA
			if = {
				limit = {
					665 = { #GABES
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				665 = { #GABES
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					458 = { #TUNISIA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				458 = { #TUNISIA
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			#ALGERIA
			if = {
				limit = {
					460 = { #CONSTANTINE
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				460 = { #CONSTANTINE
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					459 = { #ALGIERS
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				459 = { #ALGIERS
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}

			#MOROCCO
			if = {
				limit = {
					461 = { #CASABLANCA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				461 = { #CASABLANCA
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					290 = { #SPANISH AFRICA (Mediterranean coast of Morocco)
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				290 = { #SPANISH AFRICA (Mediterranean coast of Morocco)
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}

			#EGYPT
			if = {
				limit = {
					447 = { #ALEXANDRIA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				447 = { #ALEXANDRIA
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					446 = { #CAIRO
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				446 = { #CAIRO
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
			if = {
				limit = {
					453 = { #SINAI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				453 = { #SINAI
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					if = {
						limit = {
							has_resistance = yes
						}
						add_compliance = 5
					}
				}
			}
		}
	}

	focus = {
		id = ITA_libyan_railway
		icon = GFX_focus_generic_railroad
		prerequisite = { focus = ITA_litoranea_balbo }
		prerequisite = { focus = ITA_prospect_for_oil }
		x = 1
		y = 2
		relative_position_id = ITA_litoranea_balbo
		cost = 10
		available = {
			448 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			449 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			450 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			451 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			# Tripoli - Tobruk
			build_railway = {
				path = { 1149 4194 7209 9980 1118 1041 4047 10046 10117 12088 4057 1198 1127 4120 11954 10123 12094 4151 1204 7082 9992 1130 }
			}

			custom_effect_tooltip = ITA_libyan_railway_state_modifier_tt
			every_state = {
				limit = {
					OR = {
						#LIBYA
						state = 448 #TRIPOLI
						state = 449 #EL AGHELIA
						state = 450 #BENGHASI
						state = 451 #DERNA
						#TUNISIA
						state = 665 #GABES
						state = 458 #TUNISIA
						#ALGERIA
						state = 460 #CONSTANTINE
						state = 459 #ALGIERS
						#EGYPT
						state = 452 #MATROUH
						state = 447 #ALEXANDRIA
						state = 446 #CAIRO
					}
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				add_dynamic_modifier = { modifier = ITA_libyan_railway_modifier days = 730 scope = ITA }
			}
		}
	}

	focus = {
		id = ITA_libyan_refineries
		text = "Egypt Secured"
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = ITA_litoranea_balbo }

		x = -1
		y = 2
		relative_position_id = ITA_litoranea_balbo
		cost = 10

		available = {
			447 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			907 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_axis_won_africa
			GER = {
				add_ideas = ITA_axis_won_africa
			}
		
		}
	}

	focus = {
		id = ITA_move_rubber_1
		text = "Empty Africa 1"
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = ITA_develop_libya }
		x = 5
		y = 3
		cost = 10

		available = {
			controls_state = 448
			date > 1941.4.1
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_resource = {
				type = rubber
				amount = -9
				state = 448
			}	
			add_resource = {
				type = rubber
				amount = 9
				state = 159
			}	
			add_resource = {
				type = oil
				amount = -5
				state = 448
			}	
			add_resource = {
				type = oil
				amount = 5
				state = 159
			}
		}
	}

	focus = {
		id = ITA_move_rubber_2
		text = "Empty Africa 2"
		icon = GFX_focus_generic_rubber
		x = 5
		y = 4
		prerequisite = { focus = ITA_move_rubber_1 }
		cost = 10

		available = {
			controls_state = 448
			date > 1941.4.1
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_resource = {
				type = rubber
				amount = -9
				state = 448
			}	
			add_resource = {
				type = rubber
				amount = 9
				state = 159
			}	
			add_resource = {
				type = oil
				amount = -5
				state = 448
			}	
			add_resource = {
				type = oil
				amount = 5
				state = 159
			}
		}
	}

	focus = {
		id = ITA_polizia_dell_africa_italiana
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = ITA_develop_libya }
		x = 1
		y = 1
		relative_position_id = ITA_develop_libya
		cost = 10
		available = {
			any_controlled_state = {
				is_on_continent = africa
			}
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			custom_effect_tooltip = ITA_polizia_dell_africa_italiana_occupation_law_tt

			set_country_flag = ITA_colonial_police_final_flag
		}
	}


	focus = {
		id = ITA_steel_industry_in_terni
		icon = GFX_focus_generic_steel
		prerequisite = { focus = ITA_italian_highways_bba }
		x = -1
		y = 1
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
			has_full_control_of_state = 2
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_eco_buff_1
			2 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = ITA_power_plants_in_terni
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = ITA_italian_highways_bba }
		x = 1
		y = 1
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
			has_full_control_of_state = 2
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_eco_buff_2

			2 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}


	focus = {
		id = ITA_strengthen_northern_industry
		icon = GFX_focus_ITA_northern_industry
		prerequisite = { focus = ITA_steel_industry_in_terni}
		prerequisite = { focus = ITA_power_plants_in_terni}
		x = 1
		y = 2
		relative_position_id = ITA_steel_industry_in_terni
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = GER_industrial_effort_2_2IC
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = GER_industrial_effort_2_2IC
			}
		}
	}

	focus = {
		id = ITA_modernize_the_mezzogiorno
		icon = GFX_focus_ITA_southern_industry
		prerequisite = { focus = ITA_strengthen_northern_industry }
		x = 0
		y = 1
		relative_position_id = ITA_strengthen_northern_industry
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 4014			
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 9990		
					}
					115 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					156 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					117 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					}
					849 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					}
					2 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				}
				}
		}
	}

	focus = {
		id = ITA_new_industrialization_program
		text = "Develop The Italian Synthetic Industry"
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = ITA_modernize_the_mezzogiorno }

		x = 0
		y = 1
		relative_position_id = ITA_modernize_the_mezzogiorno
		cost = 10
		available = {
			
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

	completion_reward = {
		add_timed_idea={idea=ITA_mineraloelsicherungsplan days=180}	
		}
	}

	focus = {
		id = ITA_railway_innovations
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = ITA_italian_highways_bba }

		x = 3
		y = 1
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
			controls_state = 2
			controls_state = 161
			controls_state = 162
			controls_state = 117
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = ITA_railway_innovations
				ahead_reduction = 1.5
				bonus = 0.5
				uses = 1
				category = train_tech
			}

			#Roma - La Spezia
			build_railway = {
				path = { 9904 11751 6862 6875 11833 6946 6973 }
			}

			#Roma - Bologna
			build_railway = {
				path = { 11751 6862 9750 9879 9907 1616 6985 6606 }
			}

			#Roma - Napoli
			build_railway = {
				path = { 9904 11846 923 9826 819 }
			}
		}
	}

	focus = {
		id = ITA_expand_foggia_farm_fields
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = ITA_railway_innovations }

		x = -1
		y = 1
		relative_position_id = ITA_railway_innovations
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_timed_idea = { idea = ITA_foggia_farm_fields days = 730 }
		}
	}

	focus = {
		id = ITA_investments_in_edison
		icon = GFX_focus_generic_hydroelectric_energy
		prerequisite = { focus = ITA_railway_innovations }

		x = 0
		y = 2
		relative_position_id = ITA_railway_innovations
		cost = 10
		available = {
			has_full_control_of_state = 159
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {

			if = {
				limit = {
					159 = {
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
				}
				159 = { #LOMBARDY (Milano)
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
					prioritize = { 161 850 } #EMILIA ROMAGNA as main fallback
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = ITA_expand_national_universities
		icon = GFX_focus_research
		prerequisite = { focus = ITA_investments_in_edison }

		x = 0
		y = 1
		relative_position_id = ITA_investments_in_edison
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = ITA_fiocchi_munizioni
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = ITA_italian_highways_bba }

		x = 5
		y = 1
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
			has_full_control_of_state = 159
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					159 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
				}
				159 = { #LOMBARDY (Milano)
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					prioritize = { 736 852 } #LITORALE as main fallback
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = ITA_brescia_small_arms_industry
		icon = GFX_focus_focus_fra_maquis
		prerequisite = { focus = ITA_fiocchi_munizioni }

		x = -1
		y = 1
		relative_position_id = ITA_fiocchi_munizioni
		cost = 5
		available = {
			has_full_control_of_state = 159
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					159 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
				}
				159 = { #LOMBARDY
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					prioritize = { 160 852 736 } #VENETO as main fallback
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}

			add_tech_bonus = {
				name = ITA_brescia_small_arms_industry
				bonus = 1
				uses = 1
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = ITA_milan_comms_industry
		icon = GFX_goal_generic_radar
		prerequisite = { focus = ITA_fiocchi_munizioni }

		x = 1
		y = 1
		relative_position_id = ITA_fiocchi_munizioni
		cost = 5
		available = {
			is_special_project_completed = sp:sp_air_radar
			has_full_control_of_state = 159
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			159 = { #LOMBARDY (Milano)
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			2 = { #LATIUM (Rome)
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			115 = { #SICILY
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = ITA_milan_comms_industry
				bonus = 1
				uses = 1
				category = radar_tech
			}
		}
	}

	focus = {
		id = ITA_redirect_alfa_romeo_production
		icon = GFX_focus_ITA_redirect_alfa_romeo_production
		prerequisite = { focus = ITA_brescia_small_arms_industry focus = ITA_milan_comms_industry }

		x = 1
		y = 1
		relative_position_id = ITA_brescia_small_arms_industry
		cost = 5
		available = {
			has_full_control_of_state = 159
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					159 = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
				}
				159 = { #LOMBARDY (Milano)
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					prioritize = { 158 160 852 736 39 } #PIEMONTE as main fallback
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			add_tech_bonus = {
				name = ITA_redirect_alfa_romeo_production
				bonus = 0.50
				uses = 2
				category = motorized_equipment
				category = light_air
			}
		}
	}

	focus = {
		id = ITA_increase_production
		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = ITA_expand_national_universities }
		prerequisite = { focus = ITA_redirect_alfa_romeo_production }
		mutually_exclusive = { focus = ITA_keep_specialization }
		x = -1
		y = 2
		relative_position_id = ITA_redirect_alfa_romeo_production
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_ind_reforms_1
		}
	}

	focus = {
		id = ITA_keep_specialization
		icon = GFX_goal_generic_production
		prerequisite = { focus = ITA_expand_national_universities }
		prerequisite = { focus = ITA_redirect_alfa_romeo_production }
		mutually_exclusive = { focus = ITA_increase_production }
		x = 1
		y = 2
		relative_position_id = ITA_redirect_alfa_romeo_production
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_ind_reforms_2
		}
	}

	focus = {
		id = ITA_thermojet_research
		icon = GFX_focus_rocketry
		prerequisite = { focus = ITA_increase_production focus = ITA_keep_specialization }

		x = 1
		y = 1
		relative_position_id = ITA_increase_production
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {

			add_breakthrough_progress = {
				specialization = specialization_air
				value = 1
			}

			add_tech_bonus = {
				name = ITA_thermojet_research
				bonus = 1
				uses = 1
				category = air_equipment
			}
			add_tech_bonus = {
				name = ITA_thermojet_research
				ahead_reduction = 1
				bonus = 1.0
				category = jet_technology
				category = rocketry
			}

		}
	}

	focus = {
		id = ITA_build_milano_dam_with_germans
		text = "Build Milano Dam With Germans"
		icon = GFX_focus_generic_hydroelectric_energy
		prerequisite = { focus = ITA_pact_of_steel }

		x = -1
		y = 1
		relative_position_id = ITA_pact_of_steel
		cost = 5
		available = {
			159 = { 
				is_fully_controlled_by = ROOT
			}
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

		completion_reward = {
			custom_effect_tooltip = generic_skip_one_line_tt
			159 = {
				add_building_construction = {
					type = dam
					level = 1
					instant_build = yes
					province = {
						id = 3780
					}
				}
			}
			custom_effect_tooltip = {
				localization_key = building_state_modifier|dam
				INDENT = "    "
			}
		}
	}


########  ########  ######   ####  #######     ########  ######  ######## ########   ######  #### ########  #######  
##     ## ##       ##    ##   ##  ##     ##    ##       ##    ## ##       ##     ## ##    ##  ##     ##    ##     ## 
##     ## ##       ##         ##  ##     ##    ##       ##       ##       ##     ## ##        ##     ##    ##     ## 
########  ######   ##   ####  ##  ##     ##    ######    ######  ######   ########  ##        ##     ##    ##     ## 
##   ##   ##       ##    ##   ##  ##     ##    ##             ## ##       ##   ##   ##        ##     ##    ##     ## 
##    ##  ##       ##    ##   ##  ##     ##    ##       ##    ## ##       ##    ##  ##    ##  ##     ##    ##     ## 
##     ## ########  ######   ####  #######     ########  ######  ######## ##     ##  ######  ####    ##     #######  


	focus = {
		id = ITA_army_primacy_bba
		icon = GFX_goal_generic_axis_build_infantry

		x = 13
		y = 0
		relative_position_id = ITA_italian_highways_bba
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			army_experience = 25

			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					arms_factory > 0
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					arms_factory > 0
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			#Fallback
			if = {
				limit = {
					NOT = {
						any_owned_state = {
							arms_factory > 0
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}				
			}

			add_doctrine_cost_reduction = {
				name = ITA_army_primacy_bba #land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}

	focus = {
		id = ITA_preserve_army_traditions
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = ITA_army_primacy_bba }
		mutually_exclusive = { focus = ITA_a_bandits_war }
		x = -3
		y = 1
		relative_position_id = ITA_army_primacy_bba
		cost = 2
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			
			add_ideas = ITA_army_reforms_1

			army_experience = 25

			add_doctrine_cost_reduction = {
				name = ITA_preserve_army_traditions
				cost_reduction = 0.75
				uses = 1
				category = cat_grand_battle_plan
			}
		}
	}

	focus = {
		id = ITA_increase_artillery_production
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = ITA_fiocchi_munizioni }
		prerequisite = { focus = ITA_army_primacy_bba }

		x = 3
		y = 1
		relative_position_id = ITA_fiocchi_munizioni
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
		
				add_ideas = ITA_hidden_arty_production_ns
		
		}
	}

	focus = {
		id = ITA_vallo_alpino_del_littorio
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = ITA_milan_comms_industry }
		prerequisite = { focus = ITA_increase_artillery_production }

		x = 1
		y = 1
		relative_position_id = ITA_milan_comms_industry
		cost = 5
		
		available = {
			OR = {
				has_full_control_of_state = 158 #PIEDMONT
				has_full_control_of_state = 159 #LOMBARDY
				has_full_control_of_state = 850 #TRENTINO
				has_full_control_of_state = 39 #ALTO ADIGE
				has_full_control_of_state = 160 #VENETO
				has_full_control_of_state = 736 #LITORALE
				has_full_control_of_state = 852 #FIUME
			}
		}

		search_filters = {}

		completion_reward = {

			### VALLO ALPINO OCCIDENTALE ###
			if = { #PIEDMONT
				limit = {
					158 = { is_fully_controlled_by = ROOT }
				}
				158 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6780
						}
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6635
						}
						instant_build = yes
					}
				}
			}

			### VALLO ALPINO SETTENTRIONALE ###
			if = { #LOMBARDY
				limit = {
					159 = { is_fully_controlled_by = ROOT }
				}
				159 = {
					add_building_construction = { #Two separate effects for stupid tt reasons :)
						type = bunker
						level = 2
						province = {
							id = 9584
						}
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6661
						}
						instant_build = yes
					}
				}
			}
			if = { #ALTO ADIGE
				limit = {
					39 = { is_fully_controlled_by = ROOT }
				}
				39 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11615
						}
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11598
						}
						instant_build = yes
					}
				}
			}
			if = { #TRENTINO
				limit = {
					850 = { is_fully_controlled_by = ROOT }
				}
				850 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 9598
						}
						instant_build = yes
					}
				}
			}
			if = { #VENETO
				limit = {
					160 = { is_fully_controlled_by = ROOT }
				}
				160 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 3657
						}
						instant_build = yes
					}
				}
			}

			### VALLO ALPINO ORIENTALE ###
			if = { #LITORALE
				limit = {
					736 = { is_fully_controlled_by = ROOT }
				}
				736 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11595
						}
						instant_build = yes
					}
				}
			}
			if = { #ISTRIA
				limit = {
					852 = { is_fully_controlled_by = ROOT }
				}
				852 = {
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11564
						}
						instant_build = yes
					}
				}
			}

			custom_effect_tooltip = ITA_vallo_alpino_del_littorio_tt
		}
	}

	focus = {
		id = ITA_moschettieri_del_duce
		icon = GFX_focus_ITA_moschettieri_del_duce
		prerequisite = { focus = ITA_preserve_army_traditions }

		dynamic = yes

		x = 0
		y = 2
		relative_position_id = ITA_preserve_army_traditions
		cost = 2
		available = {
		}

		search_filters = {}

		completion_reward = {
			add_ideas = ITA_army_reforms_4
		}
	}

	focus = {
		id = ITA_a_bandits_war
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = ITA_army_primacy_bba }
		mutually_exclusive = { focus = ITA_preserve_army_traditions }
		x = 3
		y = 1
		relative_position_id = ITA_army_primacy_bba
		cost = 2
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_ideas = ITA_army_reforms_2

			custom_effect_tooltip = available_chief_of_army
			show_ideas_tooltip = ITA_alberto_pariani

			add_doctrine_cost_reduction = {
				name = ITA_a_bandits_war
				cost_reduction = 0.5
				uses = 2
				category = cat_mobile_warfare
			}

			add_tech_bonus = {
				name = ITA_a_bandits_war
				uses = 2
				bonus = 0.5
				category = motorized_equipment
				category = recon_tech
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_tech_bonus = {
					name = ITA_a_bandits_war
					bonus = 1
					uses = 1
					category = cat_armored_cars
				}
				add_ideas = ITA_bandits_war
			}
			else = {
				add_ideas = ITA_bandits_war_no_lar
			}

			# AI will never swap to another doctrine tree once they have started one, regardless of the AI weights, so AI needs to have it replaced manually
			hidden_effect = {
				if = {
					limit = {
						is_ai = yes
					}
					set_technology = {
						trench_warfare = 0
						mobile_warfare = 1
					}
					if = {
						limit = {
							has_tech = grand_battle_plan
						}
						set_technology = {
							grand_battle_plan = 0
							delay = 1
						}
					}
					if = {
						limit = {
							has_tech = prepared_defense
						}
						set_technology = {
							prepared_defense = 0
							elastic_defence = 1
						}
					}
					if = {
						limit = {
							has_tech = grand_assault
						}
						set_technology = {
							grand_assault = 0
							infantry_offensive = 0
							armored_operations = 0
							infiltration_assault = 0
							night_assault_tactics = 0
							attritional_containment = 0
							infiltration_in_depth = 0
							grand_mechanized_offensive = 0
							assault_concentration = 0
							branch_interoperation = 0
							assault_breakthrough = 0
							central_planning = 0
							c3i_theory = 0
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_army_leaders
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = ITA_preserve_army_traditions focus = ITA_a_bandits_war }

		x = 1
		y = 1
		relative_position_id = ITA_preserve_army_traditions
		cost = 5
		available = {
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			#NTH_Manu: Should probably also require a completed focus in any of the ME political paths, so that it can unlock appropriate generals
		}

		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			army_experience = 150

			if = {
				limit = {
					NOT = { has_government = communism }
				}
				show_unit_leaders_tooltip = ITA_annibale_bergonzoli
				custom_effect_tooltip = available_military_high_command
				show_ideas_tooltip = ITA_achille_starace	
			}
			if = {
				limit = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				show_unit_leaders_tooltip = ITA_giovanni_duca
			}
			else_if = { #Communist
				limit = {
					has_government = communism
				}
				show_unit_leaders_tooltip = ITA_ada_gobetti
			}
			
			#NTH_Manu: Medals to Divsion Commanders
		}
	}

	focus = {
		id = ITA_superesercito
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = ITA_preserve_army_traditions focus = ITA_a_bandits_war }

		x = 3
		y = 1
		relative_position_id = ITA_preserve_army_traditions
		cost = 5
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_ideas = ITA_army_reforms_3
			army_experience = 50

			#Update NS icon
			ITA_improve_regio_esercito_dm_effect = yes
		}
	}

	focus = {
		id = ITA_italian_tankettes
		text = "Italian Tanks"
		icon = GFX_focus_generic_tankette
		prerequisite = { focus = ITA_preserve_army_traditions focus = ITA_a_bandits_war }

		x = 5
		y = 1
		relative_position_id = ITA_preserve_army_traditions
		cost = 5i
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {

			add_ideas = ITA_army_reforms_7

			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

		}
	}

	focus = {
		id = ITA_bersaglieri
		icon = GFX_focus_ITA_bersaglieri
		prerequisite = { focus = ITA_army_leaders }
		prerequisite = { focus = ITA_superesercito }
		mutually_exclusive = { focus = ITA_self_propelled_guns }
		x = 1
		y = 1
		relative_position_id = ITA_army_leaders
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_ARMY_XP FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_ideas = ITA_army_reforms_5

			army_experience = 150

			add_tech_bonus = {
				name = ITA_bersaglieri
				bonus = 1
				uses = 2
				category = cat_special_forces_generic
			}
		}
	}

	focus = {
		id = ITA_divisioni_alpine
		icon = GFX_focus_ITA_alpine_division
		prerequisite = { focus = ITA_bersaglieri }

		x = -1
		y = 1
		relative_position_id = ITA_bersaglieri
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP}

		completion_reward = {

			army_experience = 150

			add_tech_bonus = {
				name = ITA_divisioni_alpine
				ahead_reduction = 1
				bonus = 1
				uses = 2
				category = mountaineers_tech
			}
			
		}
	}

	focus = {
		id = ITA_fanti_dell_aria
		icon = GFX_goal_generic_amphibious_assault
		prerequisite = { focus = ITA_bersaglieri }

		x = 0
		y = 2
		relative_position_id = ITA_bersaglieri
		cost = 10

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_tech_bonus = {
				name = ITA_fanti_dell_aria
				ahead_reduction = 1
				bonus = 1
				uses = 2
				category = marine_tech
			}
		}
	}

	focus = {
		id = ITA_cannons_of_war
		text = "Cannons Of War"
		icon = GFX_focus_generic_paratrooper
		prerequisite = { focus = ITA_bersaglieri }

		x = -3
		y = 1
		relative_position_id = ITA_bersaglieri
		cost = 10

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_tech_bonus = {
				name = ITA_cannons_of_war
				bonus = 1
				uses = 3
				category = artillery
			}
		}
	}

	focus = {
		id = ITA_italian_rifles
		text = "Carcano"
		icon = GFX_focus_CHL_departemento_de_las_tropas_nacistas_de_asalto
		prerequisite = { focus = ITA_bersaglieri }

		x = -2
		y = 2
		relative_position_id = ITA_bersaglieri
		cost = 10

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MANPOWER}

		completion_reward = {
		add_tech_bonus = {
				name = ITA_carcano
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
		}
		
	}

	focus = {
		id = ITA_self_propelled_guns
		icon = GFX_focus_generic_self_propelled_gun
		prerequisite = { focus = ITA_superesercito }
		prerequisite = { focus = ITA_italian_tankettes }
		mutually_exclusive = { focus = ITA_bersaglieri }
		x = 1
		y = 1
		relative_position_id = ITA_superesercito
		cost = 10

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {

				add_ideas = ITA_tank_production
		custom_effect_tooltip = generic_skip_one_line_tt
			add_tech_bonus = {
				name = ITA_italian_tankettes
				bonus = 1
				uses = 1
				category = cat_medium_armor
			}
		custom_effect_tooltip = generic_skip_one_line_tt
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		
		}
	}

	focus = {
		id = ITA_modernize_ansaldo_facilities
		icon = GFX_focus_ITA_modernize_ansaldo_facilities
		prerequisite = { focus = ITA_self_propelled_guns }
		mutually_exclusive = { focus = ITA_end_fiat_ansaldo_duopoly }
		x = 0
		y = 1
		relative_position_id = ITA_self_propelled_guns
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = ITA_ind_reforms_3

			add_to_variable = { ITA_iri_consumer_goods_factor = 0.02 }
			custom_effect_tooltip = ITA_ricostruzione_industriale_cg_penalty_tt

			if = {
				limit = {
					has_full_control_of_state = 158
					158 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
				}
				158 = { #PIEDMONT (Genova)
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					prioritize = { 162 161 157 } #TOSCANA as main fallback
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}

		}
	}

	focus = {
		id = ITA_ferrea_mole_ferreo_cuore
		icon = GFX_focus_ITA_ferrea_mole_ferreo_cuore
		prerequisite = { focus = ITA_end_fiat_ansaldo_duopoly focus = ITA_modernize_ansaldo_facilities }

		x = 0
		y = 1
		relative_position_id = ITA_modernize_ansaldo_facilities
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_ARMY_XP}

		completion_reward = {
		
			add_ideas = ITA_army_reforms_6
			

			army_experience = 50

			add_tech_bonus = {
				name = ITA_ferrea_mole_ferreo_cuore
				bonus = 1
				uses = 1
				category = armor
			}

			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}

		}
	}


########  ########  ######   ####    ###          ###    ######## ########   #######  ##    ##    ###    ##     ## ######## ####  ######     ###    
##     ## ##       ##    ##   ##    ## ##        ## ##   ##       ##     ## ##     ## ###   ##   ## ##   ##     ##    ##     ##  ##    ##   ## ##   
##     ## ##       ##         ##   ##   ##      ##   ##  ##       ##     ## ##     ## ####  ##  ##   ##  ##     ##    ##     ##  ##        ##   ##  
########  ######   ##   ####  ##  ##     ##    ##     ## ######   ########  ##     ## ## ## ## ##     ## ##     ##    ##     ##  ##       ##     ## 
##   ##   ##       ##    ##   ##  #########    ######### ##       ##   ##   ##     ## ##  #### ######### ##     ##    ##     ##  ##       ######### 
##    ##  ##       ##    ##   ##  ##     ##    ##     ## ##       ##    ##  ##     ## ##   ### ##     ## ##     ##    ##     ##  ##    ## ##     ## 
##     ## ########  ######   #### ##     ##    ##     ## ######## ##     ##  #######  ##    ## ##     ##  #######     ##    ####  ######  ##     ## 


	focus = {
		id = ITA_air_innovations_bba
		icon = GFX_goal_expand_the_luftwaffe
		prerequisite = { focus = ITA_mare_nostrum }
		x = -2
		y = 1
		relative_position_id = ITA_mare_nostrum
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 25

			add_tech_bonus = {
				name = ITA_air_innovations_bba #fighter_bonus
				bonus = 1
				uses = 1
				category = light_fighter
			}

			add_doctrine_cost_reduction = {
				name = air_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
		}
	}

	focus = {
		id = ITA_citta_dell_aria
		icon = GFX_focus_generic_aircraft_production
		prerequisite = { focus = ITA_air_innovations_bba }

		x = 0
		y = 1
		relative_position_id = ITA_air_innovations_bba
		cost = 10
		available = {
			has_full_control_of_state = 2
		}

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

		completion_reward = {
			custom_effect_tooltip = generic_skip_one_line_tt

			if = {
				limit = {
					2 = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
				}
				2 = { #LATIUM (Rome)
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					prioritize = { 157 849 117 } #ABRUZZO as main fallback
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
			}

			custom_effect_tooltip = ITA_citta_dell_aria_tt
			hidden_effect = {
				IF = {
					limit = { 
						2 = {
							is_fully_controlled_by = ROOT
							air_facility < 1
							land_facility < 1
							naval_facility < 1
							nuclear_facility < 1
						}
					}

					2 = {
						add_building_construction = {
							type = air_facility
							level = 1
							instant_build = yes
							province = 11751 # North of Rome
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_reggianes_exports
		icon = GFX_goal_generic_air_fighter2
		prerequisite = { focus = ITA_citta_dell_aria }

		x = -2
		y = 1
		relative_position_id = ITA_citta_dell_aria
		cost = 10
		available = {
			has_full_control_of_state = 161
		}

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}

		completion_reward = {

			add_tech_bonus = {
				name = ITA_reggianes_exports
				bonus = 0.50
				uses = 1
				category = air_equipment #Maybe more specific stuff? (Light/Medium bombers, fighters...)
			}

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ITA_add_reggianes_exports_templates = yes
			}
		}
	}

	focus = {
		id = ITA_diving_bombers
		icon = GFX_goal_poland_goal
		prerequisite = { focus = ITA_citta_dell_aria }
		prerequisite = { focus = ITA_expand_rome_flying_school }

		x = 2
		y = 1
		relative_position_id = ITA_citta_dell_aria
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 15
			if = {
				limit = {
					country_exists = GER
					NOT = { has_war_with = GER }
				}
				add_equipment_to_stockpile = { 
					type = small_plane_cas_airframe_1
					amount = 100
					producer = GER
					variant_name = "Ju 87"
				}
			}
			else = {
				add_tech_bonus = {
					name = ITA_diving_bombers
					bonus = 0.5
					uses = 1
					category = cas_bomber
					category = naval_bomber
				}	
			}
			#NTH_Manu: Sends a request to Germany to purchase CAS and/or licensing design templates (historically 100 Ju87)
		}
	}

	focus = {
		id = ITA_superaereo
		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = ITA_citta_dell_aria }

		x = 0
		y = 1
		relative_position_id = ITA_citta_dell_aria
		cost = 5
		available = {
			any_enemy_country = {
				is_major_not_original_tag_root = yes
			}
		}

		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_ideas = ITA_air_reforms_1
			add_ideas = ITA_hidden_standardization_ns
			air_experience = 150

			#Update NS icon
			ITA_improve_regia_aeronautica_dm_effect = yes
		}
	}
	focus = {
		id = ITA_standardization
		text = "Italian Naval Bombers"
		icon = GFX_goal_generic_production2
		prerequisite = { focus = ITA_superaereo }
		x = 0
		y = 1
		relative_position_id = ITA_superaereo
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}

		completion_reward = {
	
			add_ideas = ITA_air_reforms_3
		
		}
	}

	focus = {
		id = ITA_long_range_aircraft
		icon = GFX_focus_generic_long_range_aircraft
		prerequisite = { focus = ITA_standardization }

		x = -2
		y = 1
		relative_position_id = ITA_standardization
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ITA_add_long_range_aircraft_templates = yes
			}
		}
	}

	focus = {
		id = ITA_bomber_designs
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = ITA_standardization }

		x = 2
		y = 0
		relative_position_id = ITA_long_range_aircraft
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 25


			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ITA_add_bomber_designs_templates = yes
			}
		}
	}

	focus = {
		id = ITA_fighter_designs
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = ITA_standardization }

		x = 4
		y = 0
		relative_position_id = ITA_long_range_aircraft
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 25

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ITA_add_fighter_designs_templates = yes
			}
		}
	}

	focus = {
		id = ITA_supremacy_in_the_skies
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = ITA_multirole_aircraft focus = ITA_long_range_aircraft focus = ITA_fighter_designs focus = ITA_bomber_designs }

		x = 0
		y = 1
		relative_position_id = ITA_bomber_designs
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_AIR_XP}

		completion_reward = {

			air_experience = 150

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ITA_add_supremacy_in_the_skies_templates = yes
			}
		}
	}


########  ########  ######   ####    ###       ##     ##    ###    ########  #### ##    ##    ###    
##     ## ##       ##    ##   ##    ## ##      ###   ###   ## ##   ##     ##  ##  ###   ##   ## ##   
##     ## ##       ##         ##   ##   ##     #### ####  ##   ##  ##     ##  ##  ####  ##  ##   ##  
########  ######   ##   ####  ##  ##     ##    ## ### ## ##     ## ########   ##  ## ## ## ##     ## 
##   ##   ##       ##    ##   ##  #########    ##     ## ######### ##   ##    ##  ##  #### ######### 
##    ##  ##       ##    ##   ##  ##     ##    ##     ## ##     ## ##    ##   ##  ##   ### ##     ## 
##     ## ########  ######   #### ##     ##    ##     ## ##     ## ##     ## #### ##    ## ##     ## 

focus = {
		id = ITA_mare_nostrum
		icon = GFX_ITA_Regia_Marina
		x = 30
		y = 0
		cost = 10
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 150
			random_owned_controlled_state = {
				limit = {
					NOT={OR={state=115 state=114}}
					is_core_of=ROOT
					
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of=ROOT
					NOT={OR={state=115 state=114}}
					
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 5
					instant_build = yes
				}
			}

			

			add_tech_bonus = {
				name = naval_doc_bonus
				bonus = 1.0
				uses = 2
				category = naval_doctrine
			}
		}
	}

	focus = {
		id = ITA_carrier_effort
		icon = GFX_goal_generic_navy_carrier
		prerequisite = { focus = ITA_mare_nostrum }
		x = 1
		y = 1
		relative_position_id = ITA_mare_nostrum
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = cv_bonus
				bonus = 1.0
				uses = 2
				category = cv_tech
			}
		}
	}

	focus = {
		id = ITA_capital_ships
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = ITA_mare_nostrum }
		x = 3
		y = 1
		relative_position_id = ITA_mare_nostrum
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 150
			add_tech_bonus = {
				name = bb_bonus
				bonus = 1.0
				uses = 2
				category = bb_tech
				category = bc_tech
			}
			add_tech_bonus = {
				name = cr_bonus
				bonus = 1.0
				uses = 2
				category = cl_tech
				category = ca_tech
			}
		}
	}

focus = {
		id = ITA_atlantic_fleet
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = ITA_carrier_effort }
		prerequisite = { focus = ITA_capital_ships }
		mutually_exclusive = { focus = ITA_submarine_effort }
		
		x = 1
		y = 2
		relative_position_id = ITA_carrier_effort
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 250
			add_tech_bonus = {
				name = ITA_atlantic_fleet
				bonus = 1.0
				uses = 1
				category = cv_tech
			}
			add_tech_bonus = {
				name = ITA_atlantic_fleet
				bonus = 1.0
				uses = 1
				category = bb_tech
			}
			random_owned_controlled_state = {
				limit = {
					NOT={OR={state=115 state=114}}
					is_core_of=ROOT
					
					free_building_slots = {
						building = dockyard
						size > 3
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				add_building_construction = {
					type = fuel_silo
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = ITA_marines_and_landing_craft
		icon = GFX_goal_generic_amphibious_assault
		prerequisite = { focus = ITA_atlantic_fleet }
		x = 0
		y = 1
		relative_position_id = ITA_atlantic_fleet
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = ITA_marines_and_landing_craft
				bonus = 1.0
				uses = 1
				technology = marines
				technology = marines2
			}
			add_tech_bonus = {
				name = ITA_marines_and_landing_craft
				bonus = 1.0
				uses = 1
				technology = transport
				technology = landing_craft
				technology = tank_landing_craft
			}
		}
	}
	focus = {
		id = ITA_light_ship_effort
		icon = GFX_ITA_Decima_Flottiglia_MAS
		x = 5
		y = 1
		relative_position_id = ITA_mare_nostrum
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = dd_bonus
				bonus = 1.0
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = con_def_bonus
				bonus = 1.0
				uses = 1
				technology = convoy_sailing
				technology = convoy_sailing_ti
				technology = convoy_sailing_bs
			}
		}
	}

	focus = {
		id = ITA_escort_effort
		icon = GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = ITA_light_ship_effort }
		x = 1
		y = 1
		relative_position_id = ITA_light_ship_effort
		cost = 5
		ai_will_do = {
			factor = 1
		}
		search_filters = { FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = ITA_escort_effort
				bonus = 1.0
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = ITA_escort_effort
				bonus = 1.0
				uses = 2
				technology = convoy_escorts
				technology = convoy_escorts_bs
				technology = escort_carriers
			}
		}
	}

	focus = {
		id = ITA_submarine_effort
		icon = GFX_goal_generic_navy_submarine
		text = submarine_effort
		prerequisite = { focus = ITA_light_ship_effort }
		mutually_exclusive = { focus = ITA_atlantic_fleet }
		x = -1
		y = 2
		relative_position_id = ITA_light_ship_effort
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			add_tech_bonus = {
				name = ss_bonus
				bonus = 1.0
				uses = 1
				category = ss_tech
			}
			add_tech_bonus = {
				name = sub_op_bonus
				bonus = 1.0
				uses = 2
				technology = submarine_operations
				technology = undersea_blockade
				technology = convoy_interdiction
				technology = submarine_offensive
			}
		}
	}

	focus = {
		id = ITA_sea_wolves
		icon = GFX_goal_generic_wolf_pack
		prerequisite = { focus = ITA_submarine_effort }
		prerequisite = { focus = ITA_german_millitary_cooperation }
		available = {
		}
		x = 0
		y = 2
		relative_position_id = ITA_submarine_effort
		cost = 5
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = ITA_sea_wolves
				bonus = 1.0
				uses = 1
				category = ss_tech
			}
			add_tech_bonus = {
				name = ITA_sea_wolves
				bonus = 1.0
				uses = 2
				category = submarine_doctrine
			}
		}
	}


##     ## ####  ######  ########  #######  ########  ####  ######     ###    ##       
##     ##  ##  ##    ##    ##    ##     ## ##     ##  ##  ##    ##   ## ##   ##       
##     ##  ##  ##          ##    ##     ## ##     ##  ##  ##        ##   ##  ##       
#########  ##   ######     ##    ##     ## ########   ##  ##       ##     ## ##       
##     ##  ##        ##    ##    ##     ## ##   ##    ##  ##       ######### ##       
##     ##  ##  ##    ##    ##    ##     ## ##    ##   ##  ##    ## ##     ## ##       
##     ## ####  ######     ##     #######  ##     ## ####  ######  ##     ## ######## 


	
	focus = {
		id = ITA_solid_progress
		icon = GFX_focus_generic_attack_ethiopia
		mutually_exclusive = { focus = ITA_the_abyssinian_fiasco focus = ITA_struggle_in_ethiopia }
		x = 40
		y = 0
		offset = {
			x = 0
			y = 0
			trigger = {
				OR = {
					NOT = { has_dlc = "By Blood Alone" }
					AND = {
						has_game_rule = {
							rule = obsolete_focus_branches_visibility
							option = HIDE
						}
					}
				}
			}
		}

		relative_position_id = ITA_the_abyssinian_fiasco
		cost = 1

		bypass = {
		}

		available = {

		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_popularity = {
				ideology = fascism 
				popularity = 0.05
			}
			add_war_support = 0.03
			add_stability = 0.03
			add_political_power = 25
		}
	}


	focus = {
		id = ITA_servizio_informazione_militare
		icon = GFX_focus_generic_secret_service_agency
		prerequisite = { focus = ITA_solid_progress focus = ITA_the_abyssinian_fiasco focus = ITA_struggle_in_ethiopia }
		relative_position_id = ITA_solid_progress
		x = 0
		y = 1
		offset = {
			x = 0
			y = 0
			trigger = {
				OR = {
					NOT = { has_dlc = "By Blood Alone" }
					AND = {
						has_dlc = "By Blood Alone"
						has_game_rule = {
							rule = obsolete_focus_branches_visibility
							option = HIDE
						}
					}
				}
			}
		}
		relative_position_id = ITA_solid_progress
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				ETH_deescalate_the_war_effect = yes
			}
			
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_intelligence_agency = no
					}
					create_intelligence_agency = yes
				}
				add_ideas = ITA_servizio_informazione_militare_ns

				ITA_create_rosa_dainelli_operative = yes
			}
			else = {
				add_ideas = ITA_servizio_informazione_militare_ns_vanilla
			}
		}
	}

	
	focus = {
		id = ITA_triumph_in_africa_bba
		icon = GFX_focus_ETH_the_second_italo_ethiopian_war
		prerequisite = { focus = ITA_servizio_informazione_militare }

		x = 0
		y = 1
		relative_position_id = ITA_servizio_informazione_militare
		cost = 5

		bypass = {
			OR = {
				has_country_flag = ITA_defeat_in_ethiopia_flag
				ITA_has_peaced_out_eth_on_startup = yes
			}
		}

		available = {

		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_war_support = 0.05
			add_stability = 0.05
			add_political_power = 50

			unlock_decision_category_tooltip = ETH_italian_occupation_category

			hidden_effect = {
				every_controlled_state = {
					limit = {
						is_fully_controlled_by = ROOT
						is_core_of = ETH
					}
					set_state_flag = ITA_can_electrify_state_flag
				}
			}

			if = {
				limit = {
					has_any_power_balance = no
				}
				if = {
					limit = {
					}
					ITA_initiate_balance_of_power_effect = yes
				}
			}
			else_if = {
				limit = {
					NOT = { has_completed_focus = ITA_triumph_in_africa_bba }
				}
				ITA_bop_very_low_increase_effect = yes
			}
			else = {
				effect_tooltip = {
					set_power_balance = {
						id = ITA_power_balance
						left_side = ITA_grand_council_side # will keep the last set side if not specified
						right_side = ITA_mussolini_side # will keep the last set side if not specified
						set_default = yes # whether or not to reset the power balance to the initial value, default = no
					}
				}
			}

			if = {
				limit = {
					has_completed_focus = ITA_solid_progress
				}
				unlock_decision_tooltip = ITA_bop_slander_the_duce
				unlock_decision_tooltip = ITA_bop_criticize_the_war
			}
		}
	}



	focus = {
		id = ITA_devaluate_the_lire
		icon = GFX_focus_ITA_devaluate_the_lire
		prerequisite = { focus = ITA_triumph_in_africa_bba }

		x = -1
		y = 1
		relative_position_id = ITA_triumph_in_africa_bba
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_stability = 0.02
			add_timed_idea = { idea = ITA_devaluated_lira days = 180 }
		}
	}

	focus = {
		id = ITA_culto_del_duce
		icon = GFX_focus_ITA_culto_del_duce
		prerequisite = { focus = ITA_triumph_in_africa_bba }


		allow_branch = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
			}
		}

		x = 0
		y = 2
		relative_position_id = ITA_triumph_in_africa_bba
		cost = 10
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
		}

		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_country_leader_trait = lion_tamer

			ITA_bop_very_low_increase_effect = yes

			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				mark_focus_tree_layout_dirty = yes
			}
		}
	}
	
	focus = {
		id = ITA_the_man_of_providence
		icon = GFX_goal_demand_sudetenland
		prerequisite = { focus = ITA_culto_del_duce }

		x = -3
		y = 1
		relative_position_id = ITA_culto_del_duce
		cost = 5
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			power_balance_value = {
				id = ITA_power_balance
				value > 0.499
			}
			custom_trigger_tooltip = {
				tooltip = "Requires 50+ value towards Mussolini in the Balance of Power"
				always = yes
			}
		}

		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 25
			if = {
				limit = {
					has_completed_focus = ITA_strengthen_the_regime
				}
				swap_ruler_traits = {
					remove = il_duce_strengthen
					add = il_duce_providence_strengthen
				}
			}
			else = {
				swap_ruler_traits = {
					remove = il_duce
					add = il_duce_providence
				}
			}

			ITA_bop_very_low_increase_effect = yes
		}
	}

	focus = {
		id = ITA_legge_bottai
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = ITA_the_man_of_providence }

		x = -1
		y = 1
		relative_position_id = ITA_the_man_of_providence
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_stability = 0.02

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_giuseppe_bottai
		}
	}



	focus = {
		id = ITA_to_live_as_a_lion
		icon = GFX_focus_ITA_to_live_as_a_lion
		prerequisite = { focus = ITA_the_man_of_providence }
		x = 0
		y = 3
		relative_position_id = ITA_the_man_of_providence
		cost = 5
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			power_balance_value = {
				id = ITA_power_balance
				value > 0.649
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_BALANCE_OF_POWER FOCUS_FILTER_ITA_MISSIOLINI}

		completion_reward = {
			add_political_power = 50

			swap_ruler_traits = {
				remove = lion_tamer
				add = lion_tamer_2
			}

			ITA_bop_very_low_increase_effect = yes

			#Reduce time for Missiolinis
			set_variable = { ITA_missiolinis_default_days = 350 }
			custom_effect_tooltip = ITA_to_live_as_a_lion_missiolinis_tt
		}
	}

	focus = {
		id = ITA_la_battaglia_del_grano
		icon = GFX_focus_SOV_breadbasket_of_the_union
		prerequisite = { focus = ITA_culto_del_duce }
		mutually_exclusive = { focus = ITA_la_battaglia_per_la_terra }
		x = -1
		y = 1
		relative_position_id = ITA_culto_del_duce
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_timed_idea = { idea = ITA_battaglia_del_grano days = 180 }
		}
	}

	focus = {
		id = ITA_la_battaglia_per_la_terra
		icon = GFX_focus_generic_land_reclamation
		prerequisite = { focus = ITA_culto_del_duce }
		mutually_exclusive = { focus = ITA_la_battaglia_del_grano }
		x = 1
		y = 1
		relative_position_id = ITA_culto_del_duce
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			if = { #Latium
				limit = {
					2 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						} 
					}
				}
				2 = {
					add_extra_state_shared_building_slots = 2
				}
			}
			if = { #Campania
				limit = {
					117 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						} 
					}
				}
				117 = {
					add_extra_state_shared_building_slots = 2
				}
			}

			if = { #Tuscany
				limit = {
					162 = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						} 
					}
				}
				162 = {
					add_extra_state_shared_building_slots = 2
				}
			}

			add_timed_idea = { idea = ITA_battaglia_per_la_terra days = 180 }
		}
	}

	focus = {
		id = ITA_la_battaglia_per_le_nascite
		icon = GFX_focus_generic_population_growth
		prerequisite = { focus = ITA_la_battaglia_del_grano focus = ITA_la_battaglia_per_la_terra }

		x = 1
		y = 2
		relative_position_id = ITA_la_battaglia_del_grano
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_timed_idea = { idea = ITA_battaglia_per_la_nascite days = 730 }
			add_political_power = 25
		}
	}

	focus = {
		id = ITA_strengthen_the_regime
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = ITA_la_battaglia_per_le_nascite }

		x = 0
		y = 2
		relative_position_id = ITA_la_battaglia_per_le_nascite
		cost = 10
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_political_power = 50
			add_stability = 0.05
			add_war_support = 0.05

			if = {
				limit = {
					has_completed_focus = ITA_the_man_of_providence
				}
				swap_ruler_traits = {
					remove = il_duce_providence
					add = il_duce_providence_strengthen
				}
			}
			else = {
				swap_ruler_traits = {
					remove = il_duce
					add = il_duce_strengthen
				}
			}
		}
	}

	focus = {
		id = ITA_devotion
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = ITA_to_live_as_a_lion }
		prerequisite = { focus = ITA_strengthen_the_regime }

		x = -3
		y = 1
		relative_position_id = ITA_strengthen_the_regime
		cost = 5
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			power_balance_value = {
				id = ITA_power_balance
				value > 0.799
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 50

			swap_ruler_traits = {
				remove = il_duce_providence_strengthen
				add = il_duce_devotion 
			}

			ITA_bop_very_low_increase_effect = yes
		}
	}

	focus = {
		id = ITA_ministero_della_cultura_popolare #Alt name would be Ministry of Popular Culture (1937-1943)
		icon = GFX_focus_generic_italy_propaganda
		prerequisite = { focus = ITA_culto_del_duce }

		x = 3
		y = 1
		relative_position_id = ITA_culto_del_duce

		offset = {
			x = 0
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}

		cost = 5
		available = {
			has_government = fascism
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = { #Propaganda System? NOPE :D
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_war_support = 0.03
			add_political_power = 25

			ITA_bop_very_low_increase_effect = yes #Works for every Duce
		}
	}

	focus = {
		id = ITA_believe_obey_fight
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = ITA_ministero_della_cultura_popolare }

		x = 0
		y = 1
		relative_position_id = ITA_ministero_della_cultura_popolare
		cost = 5
		available = {
			has_government = fascism
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { ITA_re_conscription_factor = 0.1 }
			custom_effect_tooltip = ITA_believe_obey_fight_re_tt

			if = {
				limit = {
					NOT = { 
							has_country_leader =  {
								ruling_only = yes 
								character = ITA_dino_grandi
							}
						}
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = ITA_dino_grandi
			}

			add_political_power = 75
			add_war_support = 0.02
			add_stability = 0.02
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
		}
	}

	focus = {
		id = ITA_banda_carita
		icon = GFX_focus_ITA_banda_carita
		prerequisite = { focus = ITA_believe_obey_fight }

		x = 0
		y = 2
		relative_position_id = ITA_believe_obey_fight
		cost = 10

		allow_branch = {
			OR = {
				has_dlc = "La Resistance"
				has_dlc = "Waking the Tiger"
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
			}
		}

		available = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				agency_upgrade_number > 4
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = { 
			IF = {
				limit = { has_dlc = "La Resistance" }
				swap_ideas = {
					remove_idea = ITA_servizio_informazione_militare_ns
					add_idea = ITA_servizio_informazione_militare_banda_carita
				}
				ITA_create_padre_ildefonso_operative = yes
			}
			IF = {
				limit = {
					NOT = {
						has_dlc = "La Resistance"
					}
				}
				add_ideas = ITA_banda_carita_non_la_resistance
			}
			 

			custom_effect_tooltip = banda_carita_tt
			
		}
	}
	

	focus = {
		id = ITA_banda_koch
		icon = GFX_focus_generic_national_security
		prerequisite = { focus = ITA_banda_carita }

		x = 0
		y = 2
		relative_position_id = ITA_banda_carita
		cost = 10

		allow_branch = {
			has_dlc = "La Resistance"
			if = {
				limit = {
					has_dlc = "By Blood Alone"
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
			}
		}

		available = {
			agency_upgrade_number > 9
		}

		search_filters = {}

		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_servizio_informazione_militare_banda_carita
				add_idea = ITA_servizio_informazione_militare_banda_koch
			}
			ITA_create_pietro_koch_operative = yes
		}
	}


	focus = {
		id = ITA_security_militias
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = ITA_culto_del_duce }

		x = 6
		y = 2
		relative_position_id = ITA_culto_del_duce

		offset = {
			x = 0
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}

		cost = 5
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_camicie_nere
			hidden_effect = {
				set_technology = {
					camicie_nere_security_militias = 1
					popup = no
				}
			}
			if = {
				limit = {
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = ITA_renato_ricci
			}
		}
	}

	focus = {
		id = ITA_battaglioni_d_assalto
		icon = GFX_focus_ITA_blackshirts
		prerequisite = { focus = ITA_security_militias }
		mutually_exclusive = { focus = ITA_strengthen_the_blackshirts }
		x = -1
		y = 2
		relative_position_id = ITA_security_militias

		offset = {
			x = 0
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}

		cost = 10
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_battaglioni_d_assalto_tt
			hidden_effect = {
				set_technology = { blackshirt_assault_battalion_tech = 1 popup = no }
			}
		}
	}

	focus = {
		id = ITA_strengthen_the_blackshirts
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = ITA_security_militias }
		mutually_exclusive = { focus = ITA_battaglioni_d_assalto }
		x = 2
		y = 0
		relative_position_id = ITA_battaglioni_d_assalto
		cost = 10
		available = {
			has_government = fascism
			any_owned_state = {
				is_core_of = ROOT
				is_fully_controlled_by = ROOT
			}
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_camicie_nere
				add_idea = ITA_camicie_nere_strengthened
			}

			custom_effect_tooltip = ITA_strengthen_the_blackshirts_template_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 12 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }

				add_units_to_division_template = {
					template_name = "Camicie Nere"
					support = { 
						artillery = 0
					}
				}
			}
			random_controlled_state = { #Create a few more Blackshirt Divs
				limit = {
					is_core_of = ROOT
					is_fully_controlled_by = ROOT
				}
				prioritize = { 2 }
				custom_effect_tooltip = ITA_strengthen_the_blackshirts_spawn_divs_tt
				hidden_effect = {
					create_unit = {
						division = "division_template = \"Camicie Nere\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
						owner = ROOT
						count = 3
					}
				}
			}
		}
	}

	focus = {
		id = ITA_milizia_coloniale
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = ITA_battaglioni_d_assalto focus = ITA_strengthen_the_blackshirts }

		x = 1
		y = 2
		relative_position_id = ITA_battaglioni_d_assalto
		cost = 10
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			if = {
				limit = {
					has_idea = ITA_camicie_nere_strengthened
				}
				swap_ideas = {
					remove_idea = ITA_camicie_nere_strengthened
					add_idea = ITA_camicie_nere_milizia_coloniale
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_camicie_nere
					add_idea = ITA_camicie_nere_milizia_coloniale
				}
			}
			custom_effect_tooltip = ITA_blackshirts_div_cap_12_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 12 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}
		}
	}

	focus = {
		id = ITA_towards_a_greater_italy
		icon = GFX_focus_ITA_greater_italy
		prerequisite = { focus = ITA_strengthen_the_regime focus = ITA_blackshirt_loyalty focus = ITA_setting_course }
		mutually_exclusive = { focus = ITA_mare_nostrum_bba }

		x = 0
		y = 1
		relative_position_id = ITA_strengthen_the_regime
		cost = 5

		offset = {
			x = 8
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}

		bypass = {
			458 = { is_claimed_by = ROOT }
			665 = { is_claimed_by = ROOT }
			103 = { is_claimed_by = ROOT }
			105 = { is_claimed_by = ROOT }
			44 = { is_claimed_by = ROOT }
			805 = { is_claimed_by = ROOT }
			934 = { is_claimed_by = ROOT }
		}

		available = {
			is_subject = no
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = form_greater_italy_tt

			#CLAIMS IN TUNISIA
			if = {
				limit = {
					458 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 458 #TUNISIA
				if = {
					limit = {
						458 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Tunisian states
						limit = {
							458 = {
								controller = {
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 665 }
						}
					}
					else = { #Each Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 }
						}
					}
				}
			}
			if = {
				limit = {
					665 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 665 #GABÈS
				if = {
					limit = {
						665 = {
							controller = {
								NOT = { controls_state = 458 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 665.controller
						generator = { 665 }
					}
				}
			}

			#CLAIMS IN DALMATIAN COAST (Yugoslavia)
			if = {
				limit = {
					103 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 103 #DALMATIA
				if = {
					limit = {
						103 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Yugoslavian states
						limit = {
							103 = {
								controller = {
									controls_state = 105
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 103.controller
							generator = { 103 105 }
						}
					}
					else = { #Each Yugoslavian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 103.controller
							generator = { 103 }
						}
					}
					
				}
			}
			if = {
				limit = {
					105 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 105 #MONTENEGRO
				if = {
					limit = {
						105 = {
							controller = {
								NOT = { controls_state = 103 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 105.controller
						generator = { 105 }
					}
				}
			}

			#CLAIMS IN ALBANIA
			if = {
				limit = {
					44 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 44 #ALBANIA
				if = {
					limit = {
						44 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Albanian states
						limit = {
							44 = {
								controller = {
									controls_state = 805
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 44.controller
							generator = { 44 805 }
						}
					}
					else = { #Each Albanian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 44.controller
							generator = { 44 }
						}
					}
					
				}
			}
			if = {
				limit = {
					805 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 805 #NORTHERN EPIRUS
				if = {
					limit = {
						805 = {
							controller = {
								NOT = { controls_state = 44 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 805.controller
						generator = { 805 }
					}
				}
			}

			if = {
				limit = {
					934 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 934 #SHKÖDER
				if = {
					limit = {
						934 = {
							controller = {
								NOT = { controls_state = 44 } #Otherwise already received the wargoal above
								NOT = { controls_state = 805 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 934.controller
						generator = { 934 }
					}
				}
			}
		}
	}

	focus = {
		id = ITA_heroes_of_the_nation
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = ITA_towards_a_greater_italy }
		prerequisite = { focus = ITA_devotion }
		mutually_exclusive = { focus = ITA_capo_supremo }
		x = -4
		y = 1
		relative_position_id = ITA_towards_a_greater_italy
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_AIR_XP FOCUS_FILTER_ARMY_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_to_variable = { ITA_re_promote_cost_factor = -0.2 }
			add_to_variable = { ITA_re_command_power_gain_mult = 0.15 }
			custom_effect_tooltip = ITA_heroes_of_the_nation_re_tt

			army_experience = 25
			navy_experience = 25
			air_experience = 25
			add_war_support = 0.05

			if = {
				limit = {
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
				swap_ruler_traits = {
					remove = il_duce_devotion
					add =  il_duce_heroes
				}
			}

			custom_effect_tooltip = ITA_heroes_of_the_nation_general_traits_tt
			#Stupid tooltips oh my god I hate this game
			hidden_effect = {
				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}

				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}

				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}
			}
		}
	}

	focus = {
		id = ITA_capo_supremo
		icon = GFX_focus_ITA_capo_supremo
		prerequisite = { focus = ITA_towards_a_greater_italy }
		prerequisite = { focus = ITA_devotion }
		mutually_exclusive = { focus = ITA_heroes_of_the_nation }
		x = -2
		y = 1
		relative_position_id = ITA_towards_a_greater_italy
		cost = 10
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			power_balance_value = {
				id = ITA_power_balance
				value > 0.949
			}
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {

			IF = {
				limit = {
					NOT = {
						OR = {
							has_cosmetic_tag = greater_italy
							has_cosmetic_tag = SPQR_UNIFIED
						}
					}
				}
				set_cosmetic_tag = ITA_rsi
			}

			add_war_support = 0.05
			add_stability = -0.05
			add_political_power = 75
			add_command_power = 50
			add_popularity = {
				ideology = fascism
				popularity = 0.1
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			add_country_leader_trait = capo_supremo

			custom_effect_tooltip = ITA_mussolini_becomes_field_marshal_tt #Has to start as unit leader so that you cannot give him traits via unit_leader events (missiolinis)

			hidden_effect = {
				ITA_benito_mussolini = {
					promote_leader = yes
					add_unit_leader_trait = old_guard
					add_unit_leader_trait = politically_connected
					add_unit_leader_trait = media_personality
					add_unit_leader_trait = harsh_leader
				}
			}

			ITA_remove_king_vittorio_emanuele_as_idea = yes

			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				if = {
					limit = {
						has_tech = super_heavy_tank_chassis
					}
					#SH template
					ITA_add_il_duce_sh_tank_template_and_production = yes
				}
				else = {
					add_tech_bonus = {
						name = ITA_capo_supremo
						ahead_reduction = 2
						bonus = 1.0
						uses = 1
						technology = super_heavy_tank_chassis
					}
					custom_effect_tooltip = ITA_focus_sh_tank_template_tt
					effect_tooltip = {
						ITA_add_il_duce_sh_tank_template_and_production = yes
					}
				}
			}
			else = {
				add_tech_bonus = {
					name = ITA_capo_supremo
					ahead_reduction = 2
					bonus = 1.0
					uses = 1
					technology = super_heavy_tank
					technology = super_heavy_td
					technology = super_heavy_art
					technology = super_heavy_spaa
				}
			}

			ITA_bop_very_low_increase_effect = yes

			#Names for NSs
			hidden_effect = {
				ITA_replace_stuff_based_on_ideology_effect = yes
			}
		}
	}

	focus = {
		id = ITA_bend_the_bars
		icon = GFX_focus_ITA_bend_the_bars
		prerequisite = { focus = ITA_towards_a_greater_italy }

		x = 0
		y = 1
		relative_position_id = ITA_towards_a_greater_italy
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			#CLAIM IN CORSICA
			if = {
				limit = {
					1 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 1 #CORSICA
				if = {
					limit = {
						1 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for Corsica and Tunisian states
						limit = {
							1 = {
								controller = {
									controls_state = 458
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 1.controller
							generator = { 1 458 }
						}
					}
					else = { #Corsica and Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 1.controller
							generator = { 1 }
						}
					}
				}
			}

			#CLAIMS IN TUNISIA
			if = {
				limit = {
					458 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 458 #TUNISIA
				if = {
					limit = {
						458 = {
							controller = {
								ROOT = { NOT = { has_wargoal_against = PREV } } #Didn't get wargoal from Corsica script above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Tunisian states
						limit = {
							458 = {
								controller = {
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 665 }
						}
					}
					else = { #Each Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 }
						}
					}
				}
			}
			if = {
				limit = {
					665 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 665 #GABÈS
				if = {
					limit = {
						665 = {
							controller = {
								ROOT = { NOT = { has_wargoal_against = PREV } } #Didn't get wargoal from Corsica script above
								NOT = { controls_state = 458 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 665.controller
						generator = { 665 }
					}
				}
			}

			#CLAIMS IN BRITISH ISLANDS
			if = {
				limit = {
					116 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 116 #MALTA
				if = {
					limit = {
						116 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Malta and Cyprus
						limit = {
							116 = {
								controller = {
									controls_state = 183
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 116.controller
							generator = { 116 183 }
						}
					}
					else = { #Malta and Cyprus have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 116.controller
							generator = { 116 }
						}
					}
				}
			}
			if = {
				limit = {
					183 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 183 #CYPRUS
				if = {
					limit = {
						183 = {
							controller = {
								NOT = { controls_state = 116 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 183.controller
						generator = { 183 }
					}
				}
			}
		}
	}

	focus = {
		id = ITA_subdue_the_sentinels
		icon = GFX_focus_ITA_subdue_the_sentinels
		prerequisite = { focus = ITA_bend_the_bars }

		x = 0
		y = 1
		relative_position_id = ITA_bend_the_bars
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			#CLAIMS IN GIBRALTAR AND SUEZ CANAL
			if = {
				limit = {
					118 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 118 #GIBRALTAR
				if = {
					limit = {
						118 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both states
						limit = {
							118 = {
								controller = {
									controls_state = 446
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 118.controller
							generator = { 118 446 }
						}
					}
					else = { #Each state have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 118.controller
							generator = { 118 }
						}
					}
					
				}
			}
			if = {
				limit = {
					446 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 446 #CAIRO (Suez Canal)
				if = {
					limit = {
						446 = {
							controller = {
								NOT = { controls_state = 118 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 446.controller
						generator = { 446 }
					}
				}
			}
		}
	}

	focus = {
		id = ITA_a_colonial_empire
		icon = GFX_focus_ITA_a_colonial_empire
		prerequisite = { focus = ITA_subdue_the_sentinels }

		x = 0
		y = 1
		relative_position_id = ITA_subdue_the_sentinels
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_to_variable = { ITA_re_non_core_manpower = 0.15 }
			custom_effect_tooltip = ITA_a_colonial_empire_re_tt

			custom_effect_tooltip = ITA_a_colonial_empire_claims_tt
			every_state = {
				limit = {
					OR = {
						is_core_of = EGY
						is_core_of = KEN
						is_core_of = SUD
						is_core_of = SOM
						is_core_of = DJI
						is_core_of = ETH
						is_core_of = ERI
						is_core_of = UGA
					}
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}

	focus = {
		id = ITA_by_blood_alone
		icon = GFX_focus_ITA_by_blood_alone
		prerequisite = { focus = ITA_a_colonial_empire }

		x = 0
		y = 1
		relative_position_id = ITA_a_colonial_empire
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			# REGIO ESERCITO
			add_to_variable = { ITA_re_army_morale_factor = 0.05 }
			add_to_variable = { ITA_re_conscription_factor = 0.05 }
			add_to_variable = { ITA_re_army_attack_factor = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_re_tt

			#REGIA AERONAUTICA
			add_to_variable = { ITA_ra_air_superiority_bonus_in_combat = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_ra_tt

			#REGIA MARINA
			add_to_variable = { ITA_rm_naval_morale_factor = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_rm_tt

			add_stability = -0.1
			add_war_support = 0.1
			if = {
				limit = {
					NOT = { has_rule = can_use_kamikaze_pilots }
				}
				set_rule = { can_use_kamikaze_pilots = yes }
			}
		}
	}

	focus = {
		id = ITA_masters_of_the_aegean
		icon = GFX_focus_generic_aegean_sea_focus
		prerequisite = { focus = ITA_bend_the_bars }

		x = 2
		y = 1
		relative_position_id = ITA_bend_the_bars
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_masters_of_the_aegean_claims_tt
			every_state = {
				limit = {
					BUL_state_is_in_the_aegean_sea = yes
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}

	focus = {
		id = ITA_masters_of_the_mediterranean
		icon = GFX_focus_generic_mediterranean_sea_focus
		prerequisite = { focus = ITA_masters_of_the_aegean }

		x = 0
		y = 1
		relative_position_id = ITA_masters_of_the_aegean
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_masters_of_the_mediterranean_claims_tt
			every_state = {
				limit = {
					state_is_in_the_mediterranean_sea = yes
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}


###############
###############
# ALT FASCISM #
###############
###############

	

	#####################
	# SHARED SUB-BRANCH #
	#####################
	


##     ##  #######  ##    ##    ###    ########   ######  ##     ## ####  ######  ######## 
###   ### ##     ## ###   ##   ## ##   ##     ## ##    ## ##     ##  ##  ##    ##    ##    
#### #### ##     ## ####  ##  ##   ##  ##     ## ##       ##     ##  ##  ##          ##    
## ### ## ##     ## ## ## ## ##     ## ########  ##       #########  ##   ######     ##    
##     ## ##     ## ##  #### ######### ##   ##   ##       ##     ##  ##        ##    ##    
##     ## ##     ## ##   ### ##     ## ##    ##  ##    ## ##     ##  ##  ##    ##    ##    
##     ##  #######  ##    ## ##     ## ##     ##  ######  ##     ## ####  ######     ##    









########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######     ########  ####  ######   ##     ## ######## 
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ##    ##     ##  ##  ##    ##  ##     ##    ##    
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##          ##     ##  ##  ##        ##     ##    ##    
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######     ########   ##  ##   #### #########    ##    
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ##    ##   ##    ##  ##    ##  ##     ##    ##    
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ##    ##    ##   ##  ##    ##  ##     ##    ##    
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######     ##     ## ####  ######   ##     ##    ##    


	focus = {
		id = ITA_foreign_affairs
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = ITA_triumph_in_africa_bba }

		allow_branch = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
			}
		}

		x = 9
		y = 1
		offset = {
			x = 0
			y = 0
			trigger = {
				OR = {
					NOT = { has_dlc = "By Blood Alone" }
					AND = {
						has_game_rule = {
							rule = obsolete_focus_branches_visibility
							option = HIDE
						}
						has_completed_focus = ITA_culto_del_duce
					}
				}
			}
		}
		offset = {
			x = 0
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
		}
		relative_position_id = ITA_triumph_in_africa_bba
		cost = 5

		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 50
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_gian_galeazzo_ciano

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				custom_effect_tooltip = ITA_foreign_affairs_focus_lock_tt
			}
		}
	}

	focus = {
		id = ITA_balkan_ambition
		icon = GFX_focus_generic_balkans_focus
		prerequisite = { focus = ITA_foreign_affairs }
		mutually_exclusive = { focus = ITA_potential_allies_in_the_balkans }

		x = 0
		y = 1
		relative_position_id = ITA_foreign_affairs
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			add_state_claim = 102 #NORTH SLOVENIA
			add_state_claim = 853 #LJUBLJANA
			add_state_claim = 103 #DALMATIA
			add_state_claim = 105 #MONTENEGRO

			if = {
				limit = {
					country_exists = CRO
					OR = {
						103 = { is_fully_controlled_by = CRO }
						105 = { is_fully_controlled_by = CRO }
					}
				}
				activate_targeted_decision = { target = CRO decision = ITA_send_ultimatum_to_country_balkan }
			}
			if = {
				limit = {
					country_exists = MNT
					OR = {
						103 = { is_fully_controlled_by = MNT }
						105 = { is_fully_controlled_by = MNT }
					}
				}
				activate_targeted_decision = { target = MNT decision = ITA_send_ultimatum_to_country_balkan }
			}
			if = {
				limit = {
					country_exists = YUG
					OR = {
						103 = { is_fully_controlled_by = YUG }
						105 = { is_fully_controlled_by = YUG }
					}
				}
				activate_targeted_decision = { target = YUG decision = ITA_send_ultimatum_to_country_balkan }
			}	
		}
	}

	focus = {
		id = ITA_pact_of_steel
		icon = GFX_goal_support_fascism
		prerequisite = { focus = ITA_potential_allies_in_the_balkans focus = ITA_balkan_ambition }
		mutually_exclusive = { focus = ITA_guarantee_austrian_independence focus = ITA_italy_first }
		x = 0
		y = 1
		relative_position_id = ITA_balkan_ambition
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			GER = {
				add_opinion_modifier = { target = ITA modifier = pact_of_steel_opinion }
			}
			hidden_effect = {
				news_event = { hours = 6 id = news.184 }
			}
			add_ideas = ITA_pact_of_steel

			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = ITA_guido_jung
		}
	}

	focus = {
		id = ITA_german_military_cooperation
		icon = GFX_focus_ger_oppose_hitler
		prerequisite = { focus = ITA_pact_of_steel }

		x = 0
		y = 2
		relative_position_id = ITA_pact_of_steel
		cost = 5
		available = {
			NOT = { has_war_with = GER }
			NOT = { has_country_flag = ENG_ditched_by_the_germans_flag }
		}

		search_filters = {FOCUS_FILTER_AIR_XP FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_ideas = ITA_german_millitary_cooperation_focus
		}
	}

	focus = {
		id = ITA_italian_irredentism
		icon = GFX_focus_ITA_italian_irredentism
		prerequisite = { focus = ITA_pact_of_steel focus = ITA_italy_first }

		x = 1
		y = 1
		relative_position_id = ITA_pact_of_steel
		cost = 10
		available = {
			is_subject = no
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_political_power = 50
			add_war_support = 0.03
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_named_threat = { threat = 4 name = ITA_italian_irredentism } #Comes from the old Claims in Yugoslavia focus
			if = {
				limit = {
					103 = {
						NOT = { is_claimed_by = ROOT }
					}
				}
				add_state_claim = 103 #DALMATIA
			}
			if = {
				limit = {
					105 = {
						NOT = { is_claimed_by = ROOT }
					}
				}
				add_state_claim = 105 #MONTENEGRO
			}
			add_state_claim = 268 #DJIBUTI/FRENCH SOMALILAND
			add_state_claim = 269 #BRITISH SOMALILAND
			add_state_claim = 735 #SAVOY
			add_state_claim = 851 #VAR
			#add_state_claim = 185 #CORFU
			add_state_claim = 1 #CORSICA
			add_state_claim = 116 #MALTA
			add_state_claim = 846 #TICINO
			add_state_claim = 853 #LJUBLJANA

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				ITA_create_carmelo_borg_pisani_operative = yes
			}

			if = {
				limit = {
					has_rule = can_only_justify_war_on_threat_country
				}
				set_rule = { can_only_justify_war_on_threat_country = no }
			}
			if = {
				limit = {
					NOT = { has_rule = can_declare_war_on_same_ideology }
				}
				set_rule = { can_declare_war_on_same_ideology = yes }
			}
			if = {
				limit = {
					NOT = { has_rule = can_send_volunteers }
				}
				set_rule = { can_send_volunteers = yes }
			}
		}
	}

 ######  #### ##     ## #### ##          ##      ##    ###    ########         ######   #######          ########  ######## ##       ##       ####  ######   ######## ########  ######## ##    ## ######## 
##    ##  ##  ##     ##  ##  ##          ##  ##  ##   ## ##   ##     ##       ##    ## ##     ##         ##     ## ##       ##       ##        ##  ##    ##  ##       ##     ## ##       ###   ##    ##    
##        ##  ##     ##  ##  ##          ##  ##  ##  ##   ##  ##     ##       ##       ##     ##         ##     ## ##       ##       ##        ##  ##        ##       ##     ## ##       ####  ##    ##    
##        ##  ##     ##  ##  ##          ##  ##  ## ##     ## ########        ##       ##     ## ####### ########  ######   ##       ##        ##  ##   #### ######   ########  ######   ## ## ##    ##    
##        ##   ##   ##   ##  ##          ##  ##  ## ######### ##   ##         ##       ##     ##         ##     ## ##       ##       ##        ##  ##    ##  ##       ##   ##   ##       ##  ####    ##    
##    ##  ##    ## ##    ##  ##          ##  ##  ## ##     ## ##    ##        ##    ## ##     ##         ##     ## ##       ##       ##        ##  ##    ##  ##       ##    ##  ##       ##   ###    ##    
 ######  ####    ###    #### ########     ###  ###  ##     ## ##     ##        ######   #######          ########  ######## ######## ######## ####  ######   ######## ##     ## ######## ##    ##    ##    


	focus = {
		id = ITA_the_italian_liberation_war
		icon = GFX_focus_generic_anti_fascist_diplomacy
		x = -6
		y = 0
		relative_position_id = ITA_ethiopian_war_logistics_bba
		cost = 5
		
		allow_branch = {
			has_global_flag = ITA_antifascist_civil_war_triggered_flag
			tag = RDS
		}
		
		available = {
			tag = RDS
		}

		search_filters = {}

		completion_reward = {
			effect_tooltip = {
				set_country_flag = ITA_rds_cw_flag
				#Leader back
				if = {
					if = { #Safety check for ideology
						limit = {
							NOT = { has_government = neutrality }
						}
						set_politics = {
							ruling_party = neutrality
							elections_allowed = no
						}
					}
					if = {
						limit = {
							has_character = ITA_vittorio_emanuele_iii
							NOT = { has_country_leader = { character = ITA_vittorio_emanuele_iii ruling_only = yes } }
							NOT = { has_country_flag = ITA_vittorio_emmanuele_dead_flag }
						}
						promote_character = ITA_vittorio_emanuele_iii
					}
					else_if = {
						limit = {
							has_character = ITA_prince_umberto
							NOT = { has_country_leader = { character = ITA_prince_umberto ruling_only = yes } }
							has_country_flag = ITA_vittorio_emmanuele_dead_flag
						}
						if = {
							limit = {
								NOT = { ITA_prince_umberto = { has_ideology_group = neutrality } }#Checking for the country_leader role
							}
							ITA_promote_umberto_to_country_leader = yes
						}
						else = {
							promote_character = ITA_prince_umberto
						}
					}
				}
				else_if = {
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
				}

				#Puppet
				if = {
					limit = {
						any_other_country = {
							original_tag = ITA
							has_war_with = ROOT
							any_enemy_country = {
								is_major = yes
								OR = {
									has_government = ROOT
									has_government = democratic
								}
							}
						}
					}
					random_other_country = {
						limit = {
							original_tag = ITA
							has_war_with = ROOT
						}
						random_enemy_country = {
							limit = {
								is_major = yes
								OR = {
									has_government = ROOT
									has_government = democratic
								}
							}
							puppet = ROOT
						}
					}
				}

				#Disband Camicie Nere in the country
				delete_unit_template_and_units = { division_template = "Camicie Nere" }

				#Resistance in all cores
				every_state = {
					limit = {
						is_core_of = ROOT
						controller = {
							has_war_with = ROOT
							original_tag = ITA
						}
					}
					force_enable_resistance = {
						occupier = THIS.controller
						occupied = ROOT
					}
					start_resistance = ROOT
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_giuseppe_borea
		}
	}

	focus = {
		id = ITA_fronte_militare_clandestino
		icon = GFX_focus_SOV_mobilization_plan
		prerequisite = { focus = ITA_the_italian_liberation_war }
		x = 0
		y = 1
		relative_position_id = ITA_the_italian_liberation_war
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_template = "Divisione di Fanteria" }
				}
				division_template = { 
					name = "Divisione di Fanteria" 
					division_names_group = ITA_INF_01

					regiments = { 
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
					support = { 
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
					}
				}
			}

			if = {
				limit = {
					NOT = { has_template = "Divisione Partigiana" }
				}
				division_template = { 
					name = "Divisione Partigiana" 
					division_names_group = ITA_INF_01
					template_counter = 65
					is_locked = yes
					override_model = ITA_militia_alt_0_entity

					regiments = { 
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 2 y = 0 }
						militia = { x = 2 y = 1 }
					}
				}
			}

			2 = { #ROME
				if = {
					limit = {
						is_controlled_by = ROOT
					}
					custom_effect_tooltip = ITA_fronte_militare_clandestino_spawn_divs_friendly_rome_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Fanteria\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							prioritize_location = 9904
							owner = ROOT
							count = 2
						}
						create_unit = {
							division = "division_template = \"Divisione Partigiana\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							prioritize_location = 9904
							owner = ROOT
							count = 2
						}
					}
				}
				else = {
					custom_effect_tooltip = ITA_fronte_militare_clandestino_spawn_divs_hostile_rome_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Fanteria\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							prioritize_location = 9904
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Partigiana\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							prioritize_location = 9904
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
							count = 1
						}
					}
				}
			}

			every_core_state = {
				custom_effect_tooltip = ITA_fronte_militare_clandestino_modifier_tt
				hidden_effect = {
					add_dynamic_modifier = {
						modifier = ITA_fronte_militare_clandestino_modifier
						scope = ROOT
						days = 730
					}
				}
			}
			hidden_effect = {
				RSI = { country_event = { id = BBA_italy_civil_war.2 hours = 1 } }
			}
		}
	}

	focus = {
		id = ITA_corpo_volontari_della_liberta
		icon = GFX_focus_ITA_corpo_volontari_della_liberta
		prerequisite = { focus = ITA_fronte_militare_clandestino }
		mutually_exclusive = { focus = ITA_the_carabinieri }
		x = -1
		y = 1
		relative_position_id = ITA_fronte_militare_clandestino
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			NOT = { has_government = neutrality }
			NOT = { has_government = fascism }
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			#Add 2 Militia divs in up to 5 fully controlled states
			custom_effect_tooltip = ITA_corpo_volontari_della_liberta_spawn_divs_tt
			hidden_effect = {
				set_temp_variable = { i = 0 }
				while_loop_effect = {
					limit = {
						check_variable = { i = 5 compare = less_than }
					}
					random_core_state = {
						limit = {
							is_fully_controlled_by = ROOT
							NOT = { has_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag }
						}
						create_unit = {
							division = "division_template = \"Divisione Partigiana\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 2
						}
						set_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag
					}
					add_to_temp_variable = { i = 1 }
				}
			}
			#Add 2 Infantry Divs in capital scope (if controlled)
			if = {
				limit = {
					capital_scope = {
						is_fully_controlled_by = ROOT
					}
				}
				capital_scope = {
					custom_effect_tooltip = ITA_corpo_volontari_della_liberta_spawn_divs_capital_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Fanteria\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 2
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_the_carabinieri
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = ITA_fronte_militare_clandestino }
		mutually_exclusive = { focus = ITA_corpo_volontari_della_liberta }
		x = 2
		y = 0
		relative_position_id = ITA_corpo_volontari_della_liberta
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			NOT = { has_government = communism }
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			show_unit_leaders_tooltip = ITA_ugo_luca
			show_unit_leaders_tooltip = ITA_giuseppe_pieche

			if = {
				limit = {
					NOT = { has_tech = tech_military_police }
				}
				set_technology = { 
					tech_military_police = 1
					popup = no
				}
			}

			division_template = { 
				name = "Divisione di Carabinieri" 
				division_names_group = ITA_INF_01
				template_counter = 3

				regiments = { 
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
				support = { 
					military_police = { x = 0 y = 0 }
					engineer = { x = 0 y = 1 }
				}
			}

			if = {
				limit = {
					capital_scope = {
						is_fully_controlled_by = ROOT
					}
				}
				capital_scope = {
					custom_effect_tooltip = ITA_the_carabinieri_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Carabinieri\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 5
						}
					}
				}
			}
			else = {
				random_controlled_state = {
					limit = {
						is_core_of = ROOT
						is_fully_controlled_by = ROOT
					}
					custom_effect_tooltip = ITA_the_carabinieri_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Carabinieri\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 5
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_gappisti
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = ITA_corpo_volontari_della_liberta }
		x = -1
		y = 1
		relative_position_id = ITA_corpo_volontari_della_liberta
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			NOT = { has_government = neutrality }
			NOT = { has_government = fascism }
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_war_support = 0.05
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			add_to_variable = { 2.ITA_fronte_militare_clandestino_resistance_damage_to_garrison_on_our_occupied_states = 0.1 }
			add_to_variable = { 2.ITA_fronte_militare_clandestino_resistance_target_on_our_occupied_states = 0.1 }
			custom_effect_tooltip = ITA_gappisti_state_modifier_rds_tt

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = ITA_gappisti_ns

				if = {
					limit = {
						NOT = { has_country_flag = ITA_gappisti_operative_flag }
					}
					set_country_flag = ITA_gappisti_operative_flag
					ITA_create_laura_garroni_operative = yes
				}
			}

			hidden_effect = {
				RSI = { country_event = { id = BBA_italy_civil_war.3 hours = 1 } }
			}
		}
	}

	focus = {
		id = ITA_partisan_republics
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		prerequisite = { focus = ITA_corpo_volontari_della_liberta focus = ITA_the_carabinieri }
		x = 2
		y = 0
		relative_position_id = ITA_gappisti
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_war_support = 0.05

			add_to_variable = { 2.ITA_fronte_militare_clandestino_compliance_growth_on_our_occupied_states = -0.1 }
			custom_effect_tooltip = ITA_partisan_republics_state_modifier_tt

			#Add 2 Militia divs in up to 5 fully controlled states
			custom_effect_tooltip = ITA_partisan_republics_spawn_divs_tt
			hidden_effect = {
				set_temp_variable = { i = 0 }
				while_loop_effect = {
					limit = {
						check_variable = { i = 5 compare = less_than }
					}
					random_core_state = {
						limit = {
							is_fully_controlled_by = ROOT
							NOT = { has_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag }
						}
						create_unit = {
							division = "division_template = \"Divisione Partigiana\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						set_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag
					}
					add_to_temp_variable = { i = 1 }
				}
				#Clear flags
				every_core_state = {
					limit = {
						has_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag
					}
					clr_state_flag = ITA_corpo_volontari_della_liberta_partisans_raised_flag
				}
			}
		}
	}

	focus = {
		id = ITA_the_kings_finest
		icon = GFX_focus_generic_home_defense
		prerequisite = { focus = ITA_the_carabinieri }
		x = 4
		y = 0
		relative_position_id = ITA_gappisti
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			has_government = neutrality
		}

		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_stability = 0.05
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			
			if = {
				limit = {
					NOT = { has_template = "Divisione di Fanteria" }
				}
				division_template = { 
					name = "Divisione di Fanteria" 
					division_names_group = ITA_INF_01

					regiments = { 
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
					support = { 
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
					}
				}
			}

			if = {
				limit = {
					NOT = { has_template = "Divisione Celere" }
				}
				division_template = {
					name = "Divisione Celere" 			# Divisione Celere (Fast Division)
					division_names_group = ITA_CAV_02

					regiments = {
						cavalry = { x = 0 y = 0 }
						cavalry = { x = 0 y = 1 }
						cavalry = { x = 1 y = 0 }
						cavalry = { x = 1 y = 1 }
						motorized = { x = 2 y = 0 }			# (elite) Bersaglieri Regiment
						motorized = { x = 2 y = 1 }
						light_armor = { x = 3 y = 0 }
					}
					priority = 2
				}
			}

			if = {
				limit = {
					capital_scope = {
						is_fully_controlled_by = ROOT
					}
				}
				capital_scope = {
					#Add 3 Infantry divs and 1 Divisione Celere
					custom_effect_tooltip = ITA_the_kings_finest_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Fanteria\" start_experience_factor = 0.25 start_equipment_factor = 1.0"
							owner = ROOT
							count = 3
						}
						create_unit = {
							division = "division_template = \"Divisione Celere\" start_experience_factor = 0.25 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_fully_controlled_by = ROOT
					}
					prioritize = { 2 158 159 117 160 }
					#Add 3 Infantry divs and 1 Divisione Celere
					custom_effect_tooltip = ITA_the_kings_finest_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione di Fanteria\" start_experience_factor = 0.25 start_equipment_factor = 1.0"
							owner = ROOT
							count = 3
						}
						create_unit = {
							division = "division_template = \"Divisione Celere\" start_experience_factor = 0.25 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_grande_rivolta_rurale
		icon = GFX_focus_ITA_grande_rivolta_rurale
		prerequisite = { focus = ITA_partisan_republics }
		prerequisite = { focus = ITA_gappisti focus = ITA_the_kings_finest }
		x = 0
		y = 1
		relative_position_id = ITA_partisan_republics
		cost = 5

		#bypass = { #MM: Might be beneficial for players to do this regardless of CW
		#	ITA_is_antifascist_civil_war_over = yes
		#}

		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_timed_idea = {
				idea = ITA_grande_rivolta_rurale_ns
				days = 365
			}
			#Hidden tech for terrain bonuses for militias (communicated as part of the NS above)
			hidden_effect = {
				set_technology = { 
					mountain_warfare_militias_tech = 1
					popup = no
				}
			}
		}
	}

	focus = {
		id = ITA_liberation_or_death
		icon = GFX_focus_ITA_liberation_or_death
		prerequisite = { focus = ITA_grande_rivolta_rurale }
		x = 0
		y = 1
		relative_position_id = ITA_grande_rivolta_rurale
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			surrender_progress < 0.01
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_timed_idea = {
				idea = ITA_liberation_or_death_ns
				days = 365
			}
		}
	}

	focus = {
		id = ITA_independence_rds
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = ITA_liberation_or_death }
		x = 0
		y = 1
		relative_position_id = ITA_liberation_or_death
		cost = 5
		available = {
			has_war = no
			is_subject = yes
		}
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					is_subject = yes
				}
				OVERLORD = {
					country_event = { id = BBA_italy_civil_war.5 hours = 12 random_hours = 6 }
				}

				custom_effect_tooltip = if_they_accept_tt
				effect_tooltip = {
					OVERLORD = {
						end_puppet = ROOT
						ROOT = {
							add_opinion_modifier = {
								target = PREV
								modifier = ITA_granted_us_independence
							}
						}
					}
				}
			}
			else = { #FALLBACK TOOLTIPS
				custom_effect_tooltip = ITA_independence_overlord_fallback_tt
				effect_tooltip = {
					country_event = { id = BBA_italy_civil_war.5 hours = 12 random_hours = 6 }
				}
				custom_effect_tooltip = if_they_accept_tt
				custom_effect_tooltip = ITA_independence_overlord_fallback_accept_tt
			}
		}
	}



 ######  #### ##     ## #### ##          ##      ##    ###    ########        ########    ###     ######   ######  ####  ######  ######## 
##    ##  ##  ##     ##  ##  ##          ##  ##  ##   ## ##   ##     ##       ##         ## ##   ##    ## ##    ##  ##  ##    ##    ##    
##        ##  ##     ##  ##  ##          ##  ##  ##  ##   ##  ##     ##       ##        ##   ##  ##       ##        ##  ##          ##    
##        ##  ##     ##  ##  ##          ##  ##  ## ##     ## ########        ######   ##     ##  ######  ##        ##   ######     ##    
##        ##   ##   ##   ##  ##          ##  ##  ## ######### ##   ##         ##       #########       ## ##        ##        ##    ##    
##    ##  ##    ## ##    ##  ##          ##  ##  ## ##     ## ##    ##        ##       ##     ## ##    ## ##    ##  ##  ##    ##    ##    
 ######  ####    ###    #### ########     ###  ###  ##     ## ##     ##       ##       ##     ##  ######   ######  ####  ######     ##    


 	focus = {
		id = ITA_the_italian_social_republic
		icon = GFX_goal_support_fascism
		x = -6
		y = 0
		relative_position_id = ITA_ethiopian_war_logistics_bba
		cost = 5
		
		allow_branch = {
			has_global_flag = ITA_antifascist_civil_war_triggered_flag
			tag = RSI
		}

		available = {
			tag = RSI
		}

		search_filters = {}

		completion_reward = {
			effect_tooltip = { 
				set_country_flag = ITA_rsi_cw_flag
				#Leader back
				if = {
					if = { #Safety check for ideology
						limit = {
							NOT = { has_government = neutrality }
						}
						set_politics = {
							ruling_party = neutrality
							elections_allowed = no
						}
					}
					if = {
						limit = {
							has_character = ITA_vittorio_emanuele_iii
							NOT = { has_country_leader = { character = ITA_vittorio_emanuele_iii ruling_only = yes } }
							NOT = { has_country_flag = ITA_vittorio_emmanuele_dead_flag }
						}
						promote_character = ITA_vittorio_emanuele_iii
					}
					else_if = {
						limit = {
							has_character = ITA_prince_umberto
							NOT = { has_country_leader = { character = ITA_prince_umberto ruling_only = yes } }
							has_country_flag = ITA_vittorio_emmanuele_dead_flag
						}
						if = {
							limit = {
								NOT = { ITA_prince_umberto = { has_ideology_group = neutrality } }#Checking for the country_leader role
							}
							ITA_promote_umberto_to_country_leader = yes
						}
						else = {
							promote_character = ITA_prince_umberto
						}
					}
				}
				else_if = {
					limit = {
						has_character = ITA_dino_grandi
					}
					promote_character = ITA_dino_grandi
				}
				else_if = {
					limit = {
						has_character = ITA_italo_balbo
					}
					promote_character = ITA_italo_balbo
				}
				else_if = {
					limit = {
						has_completed_focus = ITA_culto_del_duce
						has_character = ITA_benito_mussolini
					}
					promote_character = ITA_benito_mussolini
				}

				#Puppet
				if = {
					limit = {
						is_in_faction = yes
						any_allied_country = {
							is_major = yes
						}
					}
					random_other_country = {
						limit = {
							is_in_faction = yes
							is_major = yes
						}
						puppet = ROOT
					}
				}
			}
		}
	}

	focus = {
		id = ITA_guardia_nazionale_repubblicana
		icon = GFX_focus_ITA_guardia_nazionale_repubblicana
		prerequisite = { focus = ITA_the_italian_social_republic }
		x = 0
		y = 1
		relative_position_id = ITA_the_italian_social_republic
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			custom_effect_tooltip = ITA_blackshirts_div_cap_8_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 8 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}

			if = {
				limit = {
					capital_scope = {
						is_fully_controlled_by = ROOT
					}
				}
				capital_scope = {
					custom_effect_tooltip = ITA_guardia_nazionale_repubblicana_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Camicie Nere\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
							owner = ROOT
							count = 5
						}
					}
				}
			}
			else = {
				random_controlled_state = { #Create a few more Blackshirt Divs
					limit = {
						is_core_of = ROOT
						is_fully_controlled_by = ROOT
					}
					custom_effect_tooltip = ITA_strengthen_the_blackshirts_spawn_divs_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Camicie Nere\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
							owner = ROOT
							count = 5
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_integrate_polizia_dell_africa_italiana
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = ITA_guardia_nazionale_repubblicana }
		x = -1
		y = 1
		relative_position_id = ITA_guardia_nazionale_repubblicana
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			#OR = { #MM: Probably better to leave it unlocked so that player doesn't get stuck
			#	any_owned_state = {
			#		is_on_continent = africa
			#		is_fully_controlled_by = ROOT
			#	}
			#	any_subject_country = {
			#		capital_scope = {
			#			is_on_continent = africa
			#		}
			#		any_owned_state = {
			#			is_fully_controlled_by = PREV
			#		}
			#	}
			#}
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			hidden_effect = {
				### COLONIAL CAVALRY & CAMELRY TEMPLATES
				if = {
					limit = {
						NOT = { has_template = "Cavalleria Coloniale" }
					}
					division_template = {
						name = "Cavalleria Coloniale" 
						division_names_group = ITA_CAV_03
						override_model = ITA_cavalry_alt_1_entity
						is_locked = yes

						# Represents lesser-equipped colonial units
						regiments = { 
							cavalry = { x = 0 y = 0 } 
							cavalry = { x = 0 y = 1 } 
							cavalry = { x = 1 y = 0 } 
							cavalry = { x = 1 y = 1 }
						} 

						priority = 0 
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Reggimento Meharista" }
					}
					division_template = {
						name = "Reggimento Meharista" 
						division_names_group = ITA_CAM_01 
						override_model = ITA_camelry_alt_2_entity
						regiments = { 
							camelry = { x = 0 y = 0 } 
							camelry = { x = 0 y = 1 } 
							camelry = { x = 1 y = 0 } 
							camelry = { x = 1 y = 1 } 
						} 
					}
				}
			}

			### ITALY ###
			if = {
				limit = {
					capital_scope = { is_fully_controlled_by = ROOT }
				}
				capital_scope = {
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_spawn_units_italy_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Eritrea\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Reggimento Meharista\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_core_of = ROOT
						is_fully_controlled_by = ROOT
					}
				}
				random_owned_state = {
					limit = {
						is_core_of = ROOT
						is_fully_controlled_by = ROOT
					}
					prioritize = { 2 158 159 117 160 }
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_spawn_units_italy_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Eritrea\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Reggimento Meharista\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}

			custom_effect_tooltip = ITA_strengthen_ascari_corps_create_units_tt

			## CAVALRY + INFANTRY ##

			#ERITREA
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = ERI
						is_fully_controlled_by = ROOT
					}
				}
				random_controlled_state = {
					limit = {
						is_core_of = ERI
						is_fully_controlled_by = ROOT
					}
					prioritize = { 550 } # ERITREA (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_eritrea_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Eritrea\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_controlled_state = {
							is_core_of = ERI
							is_fully_controlled_by = PREV
						}
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						any_controlled_state = {
							is_core_of = ERI
							is_fully_controlled_by = PREV
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = ERI
							is_fully_controlled_by = ROOT
						}
						prioritize = { 550 } # ERITREA (In case at some point this gets split or tag gets more cores)
						custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_eritrea_tt
						hidden_effect = {
							create_unit = {
								division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
							create_unit = {
								division = "division_template = \"Divisione Ascari Eritrea\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
						}
					}
				}
			}

			#LIBYA
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
				}
				random_controlled_state = {
					limit = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
					prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_libya_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = PREV
						}
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = PREV
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = LBA
							is_fully_controlled_by = ROOT
						}
						prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
						custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_libya_tt
						hidden_effect = {
							create_unit = {
								division = "division_template = \"Cavalleria Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
							create_unit = {
								division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
						}
					}
				}
			}

			#SOMALIA
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = SOM
						is_fully_controlled_by = ROOT
					}
				}
				random_controlled_state = {
					limit = {
						is_core_of = SOM
						is_fully_controlled_by = ROOT
					}
					prioritize = { 559 } #SOMALILAND (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_somalia_tt
					hidden_effect = {
						create_unit = {
							division = "name = \"101a Divisione F. Coloniale Somala\" division_template = \"Divisione Ascari Somala\" start_experience_factor = 0.15 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_controlled_state = {
							is_core_of = SOM
							is_fully_controlled_by = PREV
						}
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						any_controlled_state = {
							is_core_of = SOM
							is_fully_controlled_by = PREV
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = SOM
							is_fully_controlled_by = ROOT
						}
						prioritize = { 559 } #SOMALILAND (In case at some point this gets split or tag gets more cores)
						custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_somalia_tt
						hidden_effect = {
							create_unit = {
								division = "name = \"101a Divisione F. Coloniale Somala\" division_template = \"Divisione Ascari Somala\" start_experience_factor = 0.15 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
						}
					}
				}
			}


			#ETHIOPIA
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = ETH
						is_fully_controlled_by = ROOT
					}
				}
				random_controlled_state = {
					limit = {
						is_core_of = ETH
						is_fully_controlled_by = ROOT
					}
					prioritize = { 271 } #ADDIS ABABA (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_ethiopia_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 2
						}
					}
				}
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_controlled_state = {
							is_core_of = ETH
							is_fully_controlled_by = PREV
						}
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						any_controlled_state = {
							is_core_of = ETH
							is_fully_controlled_by = PREV
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = ETH
							is_fully_controlled_by = ROOT
						}
						prioritize = { 271 } #ADDIS ABABA (In case at some point this gets split or tag gets more cores)
						custom_effect_tooltip = ITA_integrate_polizia_dell_africa_italiana_ethiopia_tt
						hidden_effect = {
							create_unit = {
								division = "division_template = \"Divisione Coloniale\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 2
							}
						}
					}
				}
			}

			## CAMELRY ## Separated so that Libyan Meharisti go before Eritrean ones (cavalry is the other way around)
			hidden_effect = {
				#LIBYA
				if = {
					limit = {
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = ROOT
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = LBA
							is_fully_controlled_by = ROOT
						}
						prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
						#Regular Camelry Eritrean
						create_unit = {
							division = "division_template = \"Reggimento Meharista\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
				else_if = {
					limit = {
						any_subject_country = {
							any_controlled_state = {
								is_core_of = LBA
								is_fully_controlled_by = ROOT
							}
						}
					}
					random_other_country = {
						limit = {
							is_subject_of = ROOT
							any_controlled_state = {
								is_core_of = LBA
								is_fully_controlled_by = ROOT
							}
						}
						random_controlled_state = {
							limit = {
								is_core_of = LBA
								is_fully_controlled_by = ROOT
							}
							prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
							#Regular Camelry Eritrean
							create_unit = {
								division = "division_template = \"Reggimento Meharista\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
								owner = ROOT
								count = 1
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = ITA_anti_partisan_measures
		icon = GFX_focus_spr_crush_the_revolution
		prerequisite = { focus = ITA_integrate_polizia_dell_africa_italiana }
		x = -1
		y = 1
		relative_position_id = ITA_integrate_polizia_dell_africa_italiana
		cost = 5
		
		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.05

			add_timed_idea = {
				idea = ITA_anti_partisan_measures_ns
				days = 365
			}

			add_to_variable = { 2.ITA_fronte_militare_clandestino_resistance_damage_to_garrison_on_our_occupied_states = 0.1 }
			add_to_variable = { 2.ITA_fronte_militare_clandestino_resistance_target_on_our_occupied_states = 0.1 }
			custom_effect_tooltip = ITA_anti_partisan_measures_state_modifier_rsi_tt
			
			hidden_effect = {
				RDS = { country_event = { id = BBA_italy_civil_war.4 hours = 1 } }
			}
		}
	}

	focus = {
		id = ITA_all_within_the_state
		icon = GFX_focus_ITA_generic_fascist_workers
		prerequisite = { focus = ITA_guardia_nazionale_repubblicana }
		x = 0
		y = 2
		relative_position_id = ITA_guardia_nazionale_repubblicana
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
			has_stability > 0.2
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_war_support = 0.05
			add_timed_idea = {
				idea = ITA_all_within_the_state_ns
				days = 365
			}
		}
	}

	focus = {
		id = ITA_battaglioni_m
		icon = GFX_focus_ITA_battaglioni_m
		prerequisite = { focus = ITA_guardia_nazionale_repubblicana }
		x = 1
		y = 1
		relative_position_id = ITA_guardia_nazionale_repubblicana
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {}

		completion_reward = {
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_defence_factor = 0.05 }
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_max_org_factor = 0.05 }
			add_to_variable = { ITA_re_modifier_army_sub_unit_blackshirt_assault_battalion_defence_factor = 0.05 }
			add_to_variable = { ITA_re_modifier_army_sub_unit_blackshirt_assault_battalion_attack_factor = 0.05 }
			#Custom tooltip based on Assault Battalions focus
			if = {
				limit = {
					has_completed_focus = ITA_battaglioni_d_assalto
				}
				custom_effect_tooltip = ITA_battaglioni_m_re_battaglioni_d_assalto_tt
			}
			else = {
				custom_effect_tooltip = ITA_battaglioni_m_re_tt
			}

			custom_effect_tooltip = ITA_blackshirts_div_cap_8_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 8 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}
		}
	}

	focus = {
		id = ITA_reinforce_the_gustav_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = ITA_battaglioni_m }
		x = 1
		y = 1
		relative_position_id = ITA_battaglioni_m
		cost = 5

		bypass = {
			ITA_is_antifascist_civil_war_over = yes
		}

		available = {
		}

		search_filters = {}

		completion_reward = {
			every_core_state = {
				limit = {
					is_island_state = no
					is_fully_controlled_by = ROOT
					any_neighbor_state = {
						is_core_of = ROOT
						OR = {
							is_controlled_by = RDS
							controller = {
								has_war_with = ROOT
							}
						}
					}
				}
				every_neighbor_state = {
					limit = {
						is_core_of = ROOT
						OR = {
							is_controlled_by = RDS
							controller = {
								has_war_with = ROOT
							}
						}
					}
					if = {
						limit = {
							NOT = { is_in_array = { ROOT.targetcountries = THIS.controller } }
						}
						PREV = {
							add_building_construction = {
								type = bunker
								level = 2
								instant_build = yes
								province = {
									all_provinces = yes
									limit_to_border_country = PREV.controller
								}
							}
						}
						add_to_array = { ROOT.targetcountries = THIS.controller }
					}
				}
				clear_array = ROOT.targetcountries
			}
		}
	}

	focus = {
		id = ITA_the_social_republic_prevails
		icon = GFX_focus_ITA_the_social_republic_prevails
		prerequisite = { focus = ITA_anti_partisan_measures }
		prerequisite = { focus = ITA_all_within_the_state }
		prerequisite = { focus = ITA_reinforce_the_gustav_line }
		x = 0
		y = 1
		relative_position_id = ITA_all_within_the_state
		cost = 5

		#bypass = { #MM: Might be benefitial for the player to complete this regardless of CW
		#	ITA_is_antifascist_civil_war_over = yes
		#}

		available = {
			surrender_progress < 0.01
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_to_variable = { ITA_re_conscription_factor = 0.1 }
			add_to_variable = { ITA_re_army_core_defence_factor = 0.05 }
			custom_effect_tooltip = ITA_the_social_republic_prevails_re_tt

			add_stability = 0.1
			add_war_support = 0.1
		}
	}

	focus = {
		id = ITA_independence_rsi
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = ITA_the_social_republic_prevails }
		x = 0
		y = 1
		relative_position_id = ITA_the_social_republic_prevails
		cost = 5
		available = {
			has_war = no
			is_subject = yes
		}
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					is_subject = yes
				}
				OVERLORD = {
					country_event = { id = BBA_italy_civil_war.5 hours = 12 random_hours = 6 }
				}

				custom_effect_tooltip = if_they_accept_tt
				effect_tooltip = {
					OVERLORD = { end_puppet = ROOT }
					ROOT = {
						add_opinion_modifier = {
							target = PREV
							modifier = ITA_granted_us_independence
						}
					}
				}
			}
			else = { #FALLBACK TOOLTIPS
				custom_effect_tooltip = ITA_independence_overlord_fallback_tt
				effect_tooltip = {
					country_event = { id = BBA_italy_civil_war.5 hours = 12 random_hours = 6 }
				}
				custom_effect_tooltip = if_they_accept_tt
				custom_effect_tooltip = ITA_independence_overlord_fallback_accept_tt
			}
		}
	}


   ###    ##    ## ######## ####         ########    ###     ######   ######  ####  ######  ######## 
  ## ##   ###   ##    ##     ##          ##         ## ##   ##    ## ##    ##  ##  ##    ##    ##    
 ##   ##  ####  ##    ##     ##          ##        ##   ##  ##       ##        ##  ##          ##    
##     ## ## ## ##    ##     ##  ####### ######   ##     ##  ######  ##        ##   ######     ##    
######### ##  ####    ##     ##          ##       #########       ## ##        ##        ##    ##    
##     ## ##   ###    ##     ##          ##       ##     ## ##    ## ##    ##  ##  ##    ##    ##    
##     ## ##    ##    ##    ####         ##       ##     ##  ######   ######  ####  ######     ##    




}
